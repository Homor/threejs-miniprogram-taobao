/**! __BUGME_START__ */ !function(){"use strict";var ERuntimeRemoteObjectType,ERuntimeRemoteObjectSubType;!function(e){e.Object="object",e.Function="function",e.Undefined="undefined",e.String="string",e.Number="number",e.Boolean="boolean",e.Symbol="Symbol",e.Bigint="bigint",e.Wasm="wasm"}(ERuntimeRemoteObjectType||(ERuntimeRemoteObjectType={})),function(e){e.Error="error",e.Array="array",e.Null="null"}(ERuntimeRemoteObjectSubType||(ERuntimeRemoteObjectSubType={}));var appxStackLine=/https:\/\/appx\/af-appx\.worker\.min\.js:\d+:\d+/,nativeScriptLine=/https:\/\/www\.alipay\.com\/?:\d+:\d+|\[native code\]/,pluginWorkerStackLine=/https:\/\/\d+\.hybrid\.\S+\.com\/__plugins__\/(\d+)\/index\.worker\.js:\d+:\d+/,appWorkerStackLine=/https:\/\/\d+\.hybrid\.\S+\.com\/index\.worker\.js:\d+:\d+/;function transformSourceUrl(e){try{return pluginWorkerStackLine.test(e)?e.replace(pluginWorkerStackLine,"Plugin-$1"):e.replace(appWorkerStackLine,"App")}catch(t){return e}}function formatStack(e){var t=e.split("\n"),n=t[0],s=t.slice(1).filter((function(e){return!appxStackLine.test(e)&&!nativeScriptLine.test(e)})).map(transformSourceUrl).map((function(e){return" "===e[0]?e:"    "+e}));return s.unshift(n),s.join("\n")}function error2RemoteObject(e){var t=e.name,n=e.message,s=e.stack;"string"!=typeof s&&(s=e.toString()),-1===s.indexOf(t)&&(s=e.toString()+"\n"+s);try{s=formatStack(s)}catch(e){}return{className:t,description:s,preview:{description:s,overflow:!1,properties:[{name:"stack",type:ERuntimeRemoteObjectType.String,value:s},{name:"message",type:ERuntimeRemoteObjectType.String,value:n}],subtype:ERuntimeRemoteObjectSubType.Error,type:ERuntimeRemoteObjectType.Object},subtype:ERuntimeRemoteObjectSubType.Error,type:ERuntimeRemoteObjectType.Object}}function isError(e){try{return"[object Error]"===Object.prototype.toString.call(e)}catch(e){return!1}}function getStartupParams(){if("undefined"!=typeof __appxStartupParams&&__appxStartupParams&&__appxStartupParams.appId)return __appxStartupParams;if("undefined"!=typeof my)try{return my.callSync("getStartupParams")||{}}catch(e){}return{}}var serverConfig={default:{domain:"hpmweb.alipay.com"},1:{domain:"hpmweb.alipay.com"}},ResponseEvent,RequestMethod,BreakStepType,FingerType;function getServerConfig(){var e=getStartupParams().remoteCh;return e&&serverConfig[e]?serverConfig[e]:serverConfig.default}!function(e){e.ById="Tyro.byId",e.Sticky="Tyro.sticky",e.StickyNotSendPaused="Tyro.stickyNotSendPaused",e.StickyAsync="Tyro.stickyAsync",e.ScriptSource="Tyro.scriptSource",e.Resumed="Debugger.resumed",e.ConsoleAPICalled="Runtime.consoleAPICalled"}(ResponseEvent||(ResponseEvent={})),function(e){e.DiscardConsoleEntries="Tyro.discardConsoleEntries",e.Evaluate="Tyro.evaluate",e.EvaluateOnCallFrame="Tyro.evaluateOnCallFrame",e.CallFunctionOn="Tyro.callFunctionOn",e.CompileScript="Tyro.compileScript",e.SetBreakpointsActive="Tyro.setBreakpointsActive",e.SetSkipAllPauses="Tyro.setSkipAllPauses",e.Resume="Tyro.resume",e.StepInto="Tyro.stepInto",e.StepOver="Tyro.stepOver",e.StepOut="Tyro.stepOut",e.Pause="Tyro.pause",e.GetPossibleBreakpoints="Tyro.getPossibleBreakpoints",e.SetBreakpointByUrl="Tyro.setBreakpointByUrl",e.SetBreakpoint="Tyro.setBreakpoint",e.RemoveBreakpoint="Tyro.removeBreakpoint",e.REPL="Tyro.repl",e.GetVariableValue="Tyro.getVariableValue",e.SetPauseOnExceptions="Tyro.setPauseOnExceptions",e.SetAsyncCallStackDepth="Tyro.setAsyncCallStackDepth",e.GetProperties="Tyro.getProperties"}(RequestMethod||(RequestMethod={})),function(e){e[e.Non=0]="Non",e[e.NextSticky=1]="NextSticky",e[e.StepOver=2]="StepOver",e[e.StepOut=3]="StepOut"}(BreakStepType||(BreakStepType={})),function(e){e[e.Entry=0]="Entry",e[e.Exit=1]="Exit"}(FingerType||(FingerType={}));var TyroUtil=function(){function e(){}return e.throwsMessage=function(e){return"[Throws: "+(e?e.message:"?")+"]"},e.safeGetValueFromPropertyOnObject=function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))try{return t[n]}catch(t){return e.throwsMessage(t)}return t[n]},e.ensureProperties=function(t){var n=[];return function t(s){if(null===s||"object"!=typeof s)return s;if(-1!==n.indexOf(s))return"[Circular]";if(n.push(s),"function"==typeof s.toJSON)try{var i=t(s.toJSON());return n.pop(),i}catch(t){return e.throwsMessage(t)}if(Array.isArray(s)){var r=s.map(t);return n.pop(),r}var o=Object.keys(s).reduce((function(n,i){return n[i]=t(e.safeGetValueFromPropertyOnObject(s,i)),n}),{});return n.pop(),o}(t)},e.safeJSONStringify=function(t,n,s){return JSON.stringify(e.ensureProperties(t),n,s)},e.isWebIDE=function(){return!("undefined"==typeof navigator||!navigator)&&(navigator.swuserAgent||navigator.userAgent||"").indexOf("AlipayIDE")>-1},e}(),StickyFinger=function(){function StickyFinger(e,t,n,s){var i=this;this.isWebIDE=!1,this.asyncRequestMethod="tyroRequest",this.host=t,this.contextMap={},this.contextUrlMap={},this.breakpointMap={},this.breakpointIdMap={},this.debuggerMap={},this.objectMap={},this.originConsoleAPI={},this.requestTaskId=0,this.stickyMsgQueue=[],this.wsMsgQueue=[],this.wsIsOpen=!1,this.instrumentId=n,this.stickyFlag=s.stickyFlag,this.fingerFlag=s.fingerFlag,this.hookConsole(),this.stickyFlag&&(setTimeout((function(){i.socketTask=my.connectSocket({url:"wss://"+getServerConfig().domain+"/tyro/agent/"+i.instrumentId,multiple:!0});var e=function(){if(!i.wsIsOpen){i.originConsoleAPI.log("[tyro-agent] WebSocket 连接成功"),i.wsIsOpen=!0;for(var e=0,t=i.wsMsgQueue;e<t.length;e++){var n=t[e];i.socketTask.send({data:n})}i.wsMsgQueue=[]}};i.socketTask.onOpen((function(){e()})),i.socketTask.onClose((function(){i.originConsoleAPI.log("[tyro-agent] WebSocket 连接已关闭")})),i.socketTask.onMessage((function(t){i.wsIsOpen||e(),i.handleStickyAsync(JSON.parse(t.data.data))}))}),2e3),this.breakpointsActive=!0,this.skipAllPauses=!1,this.breakStepType=BreakStepType.Non,this.stackDepth=0,this.pauseOnExceptions="none",this.asyncCallStackDepth=0,this.lastStickyAsyncError=0,this.generateObjectId=0,this.globalExecutionContext=e,this.evaluateOnCallFrameExpression="",this.stickyNotSendPaused=!1,this.sendStickyParams=!1),this.fingerFlag&&(this.fingerId=0,this.fingerCache=[],this.fingerSendInterval=1e3,this.jsapiCallId=0,setInterval((function(){0!==i.fingerCache.length&&(i.sendPerf("Perf.trace",i.fingerCache),i.fingerCache=[])}),this.fingerSendInterval)),this.isWebIDE=TyroUtil.isWebIDE(),this.isWebIDE&&(this.asyncRequestMethod="tyroRequestAsync")}return StickyFinger.rewritePath=function(e){var t=e;return"."===t[0]&&(t=t.replace(".","")),t="app://"+(t=t.replace("tmp/data/build/",""))},StickyFinger.processRawContext=function(e){var t={path:this.rewritePath(e.path),contextId:String(e.contextId),scope:{0:[]},function:{},debuggerLine:e.debuggerLine,stickyLine:e.stickyLine};return e.scope&&Object.keys(e.scope).map((function(n){var s=e.scope[n],i=s.shift(),r=t.scope[i];t.scope[n]=r?r.concat(s.filter((function(e){return r.indexOf(e)<0}))):s})),e.function&&Object.keys(e.function).map((function(n){var s=e.function[n];t.function[n]={name:s[0],line:s[1]}})),t},StickyFinger.prototype.register=function(e,t){var n=String(e.contextId),s=StickyFinger.rewritePath(e.path);this.originConsoleAPI.log("[tyro-agent] register contextId "+n+" path "+s),this.contextMap[n]||this.breakpointMap[n]?this.originConsoleAPI.warn("[tyro-agent] duplicate context register "+n+" "+s):(this.contextMap[n]=StickyFinger.processRawContext(e),this.contextUrlMap[s]=n,this.breakpointMap[n]={},this.debuggerMap[n]=this.contextMap[n].debuggerLine.reduce((function(e,t){return e[t-1]=!0,e}),{}),this.stickyFlag&&this.xhrSend(ResponseEvent.ScriptSource,{scriptSource:t,scriptId:String(n),executionContextId:0,url:s}))},StickyFinger.prototype.sticky=function(e,t,n){if(!this.skipAllPauses&&this.breakpointsActive&&((this.debuggerMap[e]||{})[t]||(this.breakpointMap[e]||{})[t]||this.breakStepType===BreakStepType.NextSticky||this.breakStepType===BreakStepType.StepOver&&(new Error).stack.split("\n").length<=this.stackDepth||this.breakStepType===BreakStepType.StepOut&&(new Error).stack.split("\n").length<this.stackDepth||!0===this.sendStickyParams)){this.originConsoleAPI.log("[tyro-agent] sticky "+e+" "+t),this.breakStepType=BreakStepType.Non;var s={};if(this.stickyNotSendPaused)this.originConsoleAPI.log("[tyro-agent] stickyNotSendPaused");else{if(!this.sendStickyParams){this.originConsoleAPI.log("[tyro-agent] sticky sendStickyParams step 1"),s={callFrames:null,reason:"other",hitBreakpoints:[]};var i=this.breakpointMap[e][t];i&&s.hitBreakpoints.push(i);var r=(new Error).stack.split("\n");return this.stackDepth=r.length,Agent.isPhone?s.callFrames=this.processCallFramesPhone(String(e),t,n,r):s.callFrames=this.processCallFrames(String(e),t,n,r),this.stickyParams=s,this.sendStickyParams=!0,"(function(){\n          var localObject = {};\n          Agent.getScopeVariables().forEach(function (key) {\n            localObject[key] = (function(){try{return eval(key)}catch(e){return undefined}})();\n          });\n          Agent.inflateStickyParamsObject(localObject);\n          return true;\n        })()"}this.originConsoleAPI.log("[tyro-agent] sticky sendStickyParams step 2"),s=this.stickyParams,this.sendStickyParams=!1}this.originConsoleAPI.log("[tyro-agent] sticky params "+TyroUtil.safeJSONStringify(s));var o=JSON.parse(this.xhrSend(ResponseEvent.Sticky,s));return this.handleSticky(o)}},StickyFinger.prototype.fingerEntry=function(e,t){var n=this.contextMap[e].path,s=this.contextMap[e].function[t],i=this.generateFingerId(),r={time:Date.now(),file:n,line:s.line,name:s.name,id:i,type:FingerType.Entry};return this.fingerCache.push(r),i},StickyFinger.prototype.fingerExit=function(e,t,n){var s=this.contextMap[e].path,i=this.contextMap[e].function[t],r={time:Date.now(),file:s,line:i.line,name:i.name,id:n,type:FingerType.Exit};this.fingerCache.push(r)},StickyFinger.prototype.sendPerf=function(e,t){self.bugmeAPI?self.bugmeAPI.send({method:e,params:t}):self.document?self.document.addEventListener("bugmeInjected",(function(){self.bugmeAPI.send({method:e,params:t})})):self.addEventListener&&self.addEventListener("bugmeInjected",(function(){self.bugmeAPI.send({method:e,params:t})}))},StickyFinger.prototype.hookConsole=function(){var e=this;this.originConsoleAPI.log=console.log.bind(console),this.originConsoleAPI.debug=console.debug.bind(console),this.originConsoleAPI.info=console.info.bind(console),this.originConsoleAPI.error=console.error.bind(console),this.originConsoleAPI.warn=console.warn.bind(console),console.log=function(){for(var t,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if((t=e.originConsoleAPI).log.apply(t,n),!(n.length>0&&"string"==typeof n[0]&&(n[0].indexOf("[framework]")>=0||n[0].indexOf("dispatchEvent")>=0||n[0].indexOf("onMessage push")>=0))){var i={type:"log",args:n.map((function(t){return e.objectToRemoteObject(t,null,"object"==typeof t)})),executionContextId:0,timestamp:(new Date).getTime()};e.xhrSend(ResponseEvent.ConsoleAPICalled,i,null,!1)}},console.debug=function(){for(var t,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if((t=e.originConsoleAPI).debug.apply(t,n),!(n.length>0&&"string"==typeof n[0]&&(n[0].indexOf("[framework]")>=0||n[0].indexOf("dispatchEvent")>=0||n[0].indexOf("onMessage push")>=0))){var i={type:"debug",args:n.map((function(t){return e.objectToRemoteObject(t,null,"object"==typeof t)})),executionContextId:0,timestamp:(new Date).getTime()};e.xhrSend(ResponseEvent.ConsoleAPICalled,i,null,!1)}},console.info=function(){for(var t,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if((t=e.originConsoleAPI).info.apply(t,n),!(n.length>0&&"string"==typeof n[0]&&(n[0].indexOf("[framework]")>=0||n[0].indexOf("dispatchEvent")>=0||n[0].indexOf("onMessage push")>=0))){var i={type:"info",args:n.map((function(t){return e.objectToRemoteObject(t,null,"object"==typeof t)})),executionContextId:0,timestamp:(new Date).getTime()};e.xhrSend(ResponseEvent.ConsoleAPICalled,i,null,!1)}},console.error=function(){for(var t,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if((t=e.originConsoleAPI).error.apply(t,n),!(n.length>0&&"string"==typeof n[0]&&(n[0].indexOf("[framework]")>=0||n[0].indexOf("dispatchEvent")>=0||n[0].indexOf("onMessage push")>=0))){var i={type:"error",args:n.map((function(t){return e.objectToRemoteObject(t,null,"object"==typeof t)})),executionContextId:0,timestamp:(new Date).getTime()};e.xhrSend(ResponseEvent.ConsoleAPICalled,i,null,!1)}},console.warn=function(){for(var t,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if((t=e.originConsoleAPI).warn.apply(t,n),!(n.length>0&&"string"==typeof n[0]&&(n[0].indexOf("[framework]")>=0||n[0].indexOf("dispatchEvent")>=0||n[0].indexOf("onMessage push")>=0))){var i={type:"warning",args:n.map((function(t){return e.objectToRemoteObject(t,null,"object"==typeof t)})),executionContextId:0,timestamp:(new Date).getTime()};e.xhrSend(ResponseEvent.ConsoleAPICalled,i,null,!1)}}},StickyFinger.prototype.inflateStickyParamsObject=function(e){if(0!==this.stickyParams.callFrames.length){this.generateObjectId+=1;var t=String(this.generateObjectId);this.objectMap[t]=e,this.stickyParams.callFrames[0].scopeChain.push({type:"local",name:this.stickyParams.callFrames[0].functionName,object:{className:"Object",description:"Object",objectId:t,type:"object"}})}},StickyFinger.prototype.processCallFrames=function(e,t,n,s){var i=this,r=[],o=s.slice(3,s.length).map((function(e){return e.substr(0,e.lastIndexOf(":")).replace("    at ","").replace(" (",":")})),a=0,c=!0;return o.map((function(t){var s=t.split(":"),o=s[0],p=i.contextMap[e].path,u=Number(s[s.length-1]),l=i.contextUrlMap[p]||"none",y=a+":"+u+":"+p;c&&(i.scopeVariables=void 0!==i.contextMap[e]?i.contextMap[e].scope[n]:[],c=!1);var h={callFrameId:y,functionName:o,location:{scriptId:l,lineNumber:u,columnNumber:0},url:p,scopeChain:[],this:{}};r.push(h),a+=1})),r},StickyFinger.prototype.processCallFramesPhone=function(e,t,n,s){var i=this,r=[],o=s.slice(2,s.length).map((function(e){return e.substr(0,e.lastIndexOf(":")).replace("    at ","").replace(" (",":").replace("@",":")})),a=0,c=!0;return o.map((function(s){var o=s.split(":"),p=o[0],u=i.contextMap[e].path,l=Number(o[o.length-1]),y=i.contextUrlMap[u]||"none",h=a+":"+l+":"+u;c&&(i.scopeVariables=void 0!==i.contextMap[e]?i.contextMap[e].scope[n]:[],i.originConsoleAPI.log("scopeVariables "+TyroUtil.safeJSONStringify(i.scopeVariables)),i.originConsoleAPI.log("scopeVariables "+TyroUtil.safeJSONStringify(i.contextMap[e])+" "+i.contextMap[e].scope+" "+n),c=!1);var d={callFrameId:h,functionName:p,location:{scriptId:y,lineNumber:t,columnNumber:0},url:u,scopeChain:[],this:{}};r.push(d),a+=1})),r},StickyFinger.prototype.stickyAsyncLoop=function(){this.xhrSend(ResponseEvent.StickyAsync,{})},StickyFinger.prototype.xhrSendJSAPI=function(e,t,n,s){var i,r=this;if(e===ResponseEvent.Sticky){var o;this.stickyMsgQueue.length>0?(this.stickyMsgQueue.push({method:this.stickyNotSendPaused?ResponseEvent.StickyNotSendPaused:ResponseEvent.Sticky,params:t}),o=TyroUtil.safeJSONStringify(this.stickyMsgQueue),this.stickyMsgQueue=[]):o=TyroUtil.safeJSONStringify({method:this.stickyNotSendPaused?ResponseEvent.StickyNotSendPaused:ResponseEvent.Sticky,params:t}),my.call("showRemoteDebugMask",{text:" ",buttonTitle:"断点命中",hide:!1}),this.stickyNotSendPaused=!1;var a=Date.now(),c=my.callSync("tyroRequest",{url:this.host+"/tyro/agent",method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","instrument-id":this.instrumentId},data:o,timeout:6e5,blockTimeout:6e5,dataType:"json",requestTaskId:this.requestTaskId++});return my.call("showRemoteDebugMask",{hide:!0}),c.error||null===c?(null===c?this.originConsoleAPI.error("[tyro-agent] xhrSend error result is "+c):this.originConsoleAPI.error("[tyro-agent] xhrSend error "+c.error+" "+c.errorMessage),Date.now()-a>=5e3?this.xhrSendJSAPI(e,t,n,s):TyroUtil.safeJSONStringify({method:"default"})):200!==c.status?(this.originConsoleAPI.error("[tyro-agent] xhrSend status fail "+e+" "+c.status),TyroUtil.safeJSONStringify({method:"default"})):c.data}if(e===ResponseEvent.StickyAsync){var p=TyroUtil.safeJSONStringify({method:ResponseEvent.StickyAsync,params:t});this.originConsoleAPI.info("[tyro-agent] xhrSend async send "+p),my.call(this.asyncRequestMethod,{url:this.host+"/tyro/agent",method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","instrument-id":this.instrumentId},data:p,timeout:6e5,dataType:"json",requestTaskId:this.requestTaskId++,success:function(e){r.lastStickyAsyncError=0,r.stickyAsyncLoop(),200===e.status?(r.originConsoleAPI.info("[tyro-agent] xhrSend async success "+e.status+" "+e.data),r.handleStickyAsync(JSON.parse(e.data))):r.originConsoleAPI.error("[tyro-agent] xhrSend async fail "+e.status+" "+e.data)},fail:function(e){r.lastStickyAsyncError>=3?setTimeout((function(){r.stickyAsyncLoop()}),3e3):(r.lastStickyAsyncError+=1,r.stickyAsyncLoop()),r.originConsoleAPI.error("[tyro-agent] xhrSend async error "+TyroUtil.safeJSONStringify(e))}})}switch(e){case ResponseEvent.ById:i={id:n,result:t};break;case ResponseEvent.ScriptSource:i={method:ResponseEvent.ScriptSource,params:t};break;case ResponseEvent.Resumed:i={method:ResponseEvent.Resumed,params:t};break;case ResponseEvent.ConsoleAPICalled:i={method:ResponseEvent.ConsoleAPICalled,params:t};break;default:return}s?this.stickyMsgQueue.push(i):this.wsIsOpen?this.socketTask.send({data:TyroUtil.safeJSONStringify(i)}):this.wsMsgQueue.push(TyroUtil.safeJSONStringify(i))},StickyFinger.prototype.xhrSend=function(e,t,n,s){var i=this;if(Agent.isPhone)return this.xhrSendJSAPI(e,t,n,s);var r,o=new XMLHttpRequest;if(e===ResponseEvent.Sticky){var a;if(o.open("POST",this.host+"/tyro/agent",!1),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.setRequestHeader("instrument-id",this.instrumentId),this.stickyMsgQueue.length>0){this.stickyMsgQueue.push({method:this.stickyNotSendPaused?ResponseEvent.StickyNotSendPaused:ResponseEvent.Sticky,params:t});try{a=TyroUtil.safeJSONStringify(this.stickyMsgQueue)}catch(e){this.originConsoleAPI.error(e),a=TyroUtil.safeJSONStringify({method:this.stickyNotSendPaused?ResponseEvent.StickyNotSendPaused:ResponseEvent.Sticky,params:t})}finally{this.stickyMsgQueue=[]}}else a=TyroUtil.safeJSONStringify({method:this.stickyNotSendPaused?ResponseEvent.StickyNotSendPaused:ResponseEvent.Sticky,params:t});if(this.stickyNotSendPaused=!1,o.send(a),200===o.status)return o.responseText;throw new Error("[sticky-finger] xhrSend error "+e+" "+o.status)}if(e===ResponseEvent.StickyAsync)return o.open("POST",this.host+"/tyro/agent",!0),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.setRequestHeader("instrument-id",this.instrumentId),o.onload=function(){if(i.lastStickyAsyncError=0,i.stickyAsyncLoop(),4!==o.readyState||200!==o.status)throw new Error("[tyro-agent] xhrSend async fail "+e+" "+o.readyState+" "+o.status);i.handleStickyAsync(JSON.parse(o.responseText))},o.onerror=function(){throw i.lastStickyAsyncError>=3?setTimeout((function(){i.stickyAsyncLoop()}),3e3):(i.lastStickyAsyncError+=1,i.stickyAsyncLoop()),new Error("[tyro-agent] xhrSend async error "+e+" "+o.readyState+" "+o.status)},void o.send(TyroUtil.safeJSONStringify({method:ResponseEvent.StickyAsync,params:t}));switch(o.open("POST",this.host+"/tyro/agent",!0),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.setRequestHeader("instrument-id",this.instrumentId),o.onload=function(){if(4!==o.readyState||200!==o.status)throw new Error("[tyro-agent] xhrSend async fail "+e+" "+o.readyState+" "+o.status)},o.onerror=function(){throw new Error("[tyro-agent] xhrSend async error "+e+" "+o.readyState+" "+o.status)},e){case ResponseEvent.ById:r={id:n,result:t};break;case ResponseEvent.ScriptSource:r={method:ResponseEvent.ScriptSource,params:t};break;case ResponseEvent.Resumed:r={method:ResponseEvent.Resumed,params:t};break;case ResponseEvent.ConsoleAPICalled:r={method:ResponseEvent.ConsoleAPICalled,params:t};break;default:return}s?this.stickyMsgQueue.push(r):o.send(TyroUtil.safeJSONStringify(r))},StickyFinger.prototype.handleSticky=function(e){var t=e.id,n=e.method,s=e.params;switch(n){case RequestMethod.DiscardConsoleEntries:return this.stickyNotSendPaused=!0,this.originConsoleAPI.log("[tyro-agent] DiscardConsoleEntries success"),"true";case RequestMethod.CallFunctionOn:return this.stickyNotSendPaused=!0,this.originConsoleAPI.log("[tyro-agent] CallFunctionOn TODO sticky"),"true";case RequestMethod.CompileScript:return this.stickyNotSendPaused=!0,this.originConsoleAPI.log("[tyro-agent] CompileScript success, "+TyroUtil.safeJSONStringify(s)),"true";case RequestMethod.SetBreakpointsActive:return this.stickyNotSendPaused=!0,this.breakpointsActive=s.active,this.originConsoleAPI.log("[tyro-agent] SetBreakpointsActive success, breakpointsActive "+this.breakpointsActive),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.SetSkipAllPauses:return this.stickyNotSendPaused=!0,this.skipAllPauses=s.skip,this.originConsoleAPI.log("[tyro-agent] SetSkipAllPauses success, skipAllPauses "+this.skipAllPauses),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.Resume:return this.xhrSend(ResponseEvent.Resumed,{}),this.originConsoleAPI.log("[tyro-agent] Resume success"),"false";case RequestMethod.StepInto:return this.xhrSend(ResponseEvent.Resumed,{}),this.breakStepType=BreakStepType.NextSticky,this.originConsoleAPI.log("[tyro-agent] StepInto success"),"false";case RequestMethod.StepOver:return this.xhrSend(ResponseEvent.Resumed,{}),this.breakStepType=BreakStepType.StepOver,this.originConsoleAPI.log("[tyro-agent] StepOver success"),"false";case RequestMethod.StepOut:return this.xhrSend(ResponseEvent.Resumed,{}),this.breakStepType=BreakStepType.StepOut,this.originConsoleAPI.log("[tyro-agent] StepOut success"),"false";case RequestMethod.GetPossibleBreakpoints:return this.stickyNotSendPaused=!0,this.getPossibleBreakpoints(t,s,!0),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.SetBreakpointByUrl:return this.stickyNotSendPaused=!0,this.setBreakpointByUrl(t,s,!0),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.SetBreakpoint:return this.stickyNotSendPaused=!0,this.setBreakpoint(t,s,!0),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.RemoveBreakpoint:return this.stickyNotSendPaused=!0,this.removeBreakpoint(t,s),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.REPL:return this.stickyNotSendPaused=!0,this.breakStepType=BreakStepType.NextSticky,"(function(){(function(){"+s.statement+"})();return true})()";case RequestMethod.GetVariableValue:this.stickyNotSendPaused=!0;var i=e.params;return this.breakStepType=BreakStepType.NextSticky,"(function(){(function(){\n          Agent.variableValue({"+i.map((function(e){return e+": (function(){try{return "+e+"}catch(e){return undefined}})()"})).join(",")+"})\n        })();return true})()";case RequestMethod.SetPauseOnExceptions:return this.stickyNotSendPaused=!0,this.setPauseOnExceptions(t,s),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.SetAsyncCallStackDepth:return this.stickyNotSendPaused=!0,this.setAsyncCallStackDepth(t,s),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.EvaluateOnCallFrame:return this.stickyNotSendPaused=!0,this.evaluateOnCallFrameExpression=s.expression,this.breakStepType=BreakStepType.NextSticky,"(function(){\n          var tyroRet,tyroErr;\n          try{tyroRet=eval(Agent.getEvaluateOnCallFrameExpression())}\n          catch(e){tyroErr=e}\n          Agent.evaluateOnCallFrame("+t+",tyroRet,tyroErr,"+s.generatePreview+");\n          return true;\n        })()";case RequestMethod.GetProperties:return this.stickyNotSendPaused=!0,this.getProperties(t,s,!0),this.breakStepType=BreakStepType.NextSticky,"true";default:return this.breakStepType=BreakStepType.NextSticky,"true"}},StickyFinger.prototype.handleStickyAsync=function(e){var t=e.id,n=e.method,s=e.params;switch(this.originConsoleAPI.log("[tyro-agent] handleStickyAsync "+t+", "+n+", "+s),n){case RequestMethod.DiscardConsoleEntries:this.originConsoleAPI.log("[tyro-agent] DiscardConsoleEntries success");break;case RequestMethod.Evaluate:this.originConsoleAPI.log("[tyro-agent] Evaluate start, expression "+s.expression);var i=this.evaluate(this.globalExecutionContext,t,s);this.originConsoleAPI.log("[tyro-agent] Evaluate success, expression "+s.expression+", result "+TyroUtil.safeJSONStringify(i));break;case RequestMethod.CallFunctionOn:this.originConsoleAPI.log("[tyro-agent] CallFunctionOn TODO stickyAsync");break;case RequestMethod.CompileScript:this.originConsoleAPI.log("[tyro-agent] CompileScript success, params "+TyroUtil.safeJSONStringify(s));break;case RequestMethod.SetBreakpointsActive:this.breakpointsActive=s.active,this.originConsoleAPI.log("[tyro-agent] SetBreakpointsActive success, breakpointsActive "+this.breakpointsActive);break;case RequestMethod.SetSkipAllPauses:this.skipAllPauses=s.skip,this.originConsoleAPI.log("[tyro-agent] SetSkipAllPauses success, skipAllPauses "+this.skipAllPauses);break;case RequestMethod.Pause:this.breakStepType=BreakStepType.NextSticky,this.originConsoleAPI.log("[tyro-agent] Pause success");break;case RequestMethod.GetPossibleBreakpoints:this.getPossibleBreakpoints(t,s);break;case RequestMethod.SetBreakpointByUrl:this.setBreakpointByUrl(t,s);break;case RequestMethod.SetBreakpoint:this.setBreakpoint(t,s);break;case RequestMethod.RemoveBreakpoint:this.removeBreakpoint(t,s);break;case RequestMethod.SetPauseOnExceptions:this.setPauseOnExceptions(t,s);break;case RequestMethod.SetAsyncCallStackDepth:this.setAsyncCallStackDepth(t,s);break;case RequestMethod.GetProperties:this.getProperties(t,s)}},StickyFinger.prototype.objectToRemoteObject=function(e,t,n){var s={};if(isError(e)&&(t=e),t)return error2RemoteObject(t);switch(s.type=typeof e,s.type){case"undefined":break;case"object":if(null===e){s.subtype="null",s.value=null;break}if(void 0!==e.constructor&&(s.className=e.constructor.name),void 0!==e.toString)try{s.description=e.toString()}catch(e){s.description="[object Object]"}else s.description="[object Object]";if(this.generateObjectId+=1,s.objectId=String(this.generateObjectId),this.objectMap[String(this.generateObjectId)]=e,n)for(var i in s.preview={type:"object",description:"Object",overflow:!1,properties:[]},e){var r=typeof e[i];s.preview.properties.push({name:i,type:r,value:"object"===r?"Object":"function"===r?"":e[i]})}break;case"function":s.description=e.toString(),s.className="Function";break;default:s.value=e,s.description=e.toString()}return s},StickyFinger.prototype.evaluateOnCallFrame=function(e,t,n,s){var i=this.objectToRemoteObject(t,n,s);return this.xhrSend(ResponseEvent.ById,{result:i},e,!0),i},StickyFinger.prototype.evaluate=function(executionContext,id,params){var returnValue,error;try{returnValue=function(expression){return"function"==typeof eval?eval(expression):Agent.evalReference(expression)}.call(executionContext,params.expression)}catch(e){error=e}var result=this.objectToRemoteObject(returnValue,error,params.generatePreview);return this.xhrSend(ResponseEvent.ById,{result:result},id),result},StickyFinger.prototype.getPossibleBreakpoints=function(e,t,n){var s=t.scriptId,i=t.startLine,r=t.endLine===t.startLine?t.endLine+1:t.endLine,o={locations:[]};if(this.contextMap[s])for(var a=this.contextMap[s].stickyLine,c=i;c<r;c++)a.includes(c)&&o.locations.push({scriptId:s,lineNumber:c,columnNumber:0});else this.originConsoleAPI.warn("[tyro-agent] getPossibleBreakpoints no scriptId "+s+" in contextMap");this.originConsoleAPI.log("[tyro-agent] getPossibleBreakpoints success, result: "+TyroUtil.safeJSONStringify(o)),this.xhrSend(ResponseEvent.ById,o,e,n)},StickyFinger.prototype.setBreakpointByUrl=function(e,t,n){var s=t.scriptId,i=t.url,r=t.lineNumber;if(this.contextMap[s])if(this.contextMap[s].stickyLine.includes(r)){var o=s+":"+r+":0:"+i,a={breakpointId:o,locations:[{scriptId:s,lineNumber:r,columnNumber:0}]};this.breakpointMap[s][r]=o,this.breakpointIdMap[o]={contextId:s,line:r},this.originConsoleAPI.log("[tyro-agent] setBreakpointByUrl success, scriptId: "+s+", url: "+i+", lineNumber: "+r),this.xhrSend(ResponseEvent.ById,a,e,n)}else this.originConsoleAPI.warn("[tyro-agent] setBreakpointByUrl not sticky line, scriptId: "+s+", url: "+i+", lineNumber: "+r);else this.originConsoleAPI.warn("[tyro-agent] setBreakpointByUrl no contextMap, scriptId: "+s)},StickyFinger.prototype.setBreakpoint=function(e,t,n){var s=t.scriptId,i=t.lineNumber;if(this.contextMap[s])if(this.contextMap[s].stickyLine.includes(i)){var r=s+":"+i+":0",o={breakpointId:r,actualLocation:{scriptId:s,lineNumber:i,columnNumber:0}};this.breakpointMap[s][i]=r,this.breakpointIdMap[r]={contextId:s,line:i},this.originConsoleAPI.log("[tyro-agent] setBreakpoint success, scriptId: "+s+", lineNumber: "+i),this.xhrSend(ResponseEvent.ById,o,e,n)}else this.originConsoleAPI.warn("[tyro-agent] setBreakpoint not sticky line, scriptId: "+s+", lineNumber: "+i);else this.originConsoleAPI.warn("[tyro-agent] setBreakpoint no contextMap, scriptId: "+s)},StickyFinger.prototype.removeBreakpoint=function(e,t){var n=t.breakpointId,s=this.breakpointIdMap[n];s||this.originConsoleAPI.warn("[tyro-agent] removeBreakpoint no breakpointId "+n);var i=s.contextId,r=s.line;delete this.breakpointMap[i][r],this.originConsoleAPI.log("[tyro-agent] removeBreakpoint success, breakpointId: "+n+", scriptId: "+i+", line: "+r)},StickyFinger.prototype.setPauseOnExceptions=function(e,t){t&&["none","uncaught","all"].includes(t.state)?(this.pauseOnExceptions=t.state,this.originConsoleAPI.log("[tyro-agent] setPauseOnExceptions success, pauseOnExceptions state "+this.pauseOnExceptions)):this.originConsoleAPI.warn("[tyro-agent] setPauseOnExceptions state invalid: "+TyroUtil.safeJSONStringify(t))},StickyFinger.prototype.setAsyncCallStackDepth=function(e,t){!t||"number"!=typeof t.maxDepth||t.maxDepth<0?this.originConsoleAPI.warn("[tyro-agent] setAsyncCallStackDepth maxDepth invalid: "+TyroUtil.safeJSONStringify(t)):(this.asyncCallStackDepth=t.maxDepth,this.originConsoleAPI.log("[tyro-agent] setAsyncCallStackDepth success, maxDepth "+this.asyncCallStackDepth))},StickyFinger.prototype.getProperties=function(e,t,n){var s=t.objectId,i=this.objectMap[s],r=[];for(var o in i)r.push({name:o,value:this.objectToRemoteObject(i[o])});this.xhrSend(ResponseEvent.ById,{result:r},e,n)},StickyFinger.prototype.generateFingerId=function(){return this.fingerId+=1,this.fingerId},StickyFinger}(),Agent=function(){function e(t,n){if(e.singleton)return e.singleton;this.host="https://"+getServerConfig().domain,this.stickyFinger=new StickyFinger("undefined"!=typeof window?window:self,this.host,t,n)}return e.getShadowMethod=function(){this.globalReference=self,"function"==typeof eval?this.evalReference=eval:"function"==typeof __eval&&(this.evalReference=__eval)},e.setShadowMethod=function(){this.globalReference.eval=this.evalReference},e.setInstrumentId=function(e){this.instrumentId=e},e.register=function(t,n){if(!e.singleton){if(!this.instrumentId&&"undefined"!=typeof my)try{this.instrumentId=getStartupParams().tyroId}catch(e){}e.instance(this.instrumentId,t)}e.singleton.stickyFinger.register(t,n)},e.sticky=function(t,n,s){return e.singleton.stickyFinger.sticky(t,n,s)},e.getEvaluateOnCallFrameExpression=function(){return e.singleton.stickyFinger.evaluateOnCallFrameExpression},e.evaluateOnCallFrame=function(t,n,s,i){return e.singleton.stickyFinger.evaluateOnCallFrame(t,n,s,i)},e.getScopeVariables=function(){return e.singleton.stickyFinger.scopeVariables},e.inflateStickyParamsObject=function(t){return e.singleton.stickyFinger.inflateStickyParamsObject(t)},e.entry=function(t,n){return e.singleton.stickyFinger.fingerEntry(t,n)},e.exit=function(t,n,s){e.singleton.stickyFinger.fingerExit(t,n,s)},e.instance=function(t,n){e.singleton=new e(t,n)},e.isPhone=!0,e.instrumentId=null,e}();Agent.getShadowMethod();var globalReference="undefined"!=typeof window?window:self;globalReference.Agent||(globalReference.StickyFinger=StickyFinger,globalReference.Agent=Agent)}();

!function(){"use strict";var e,t,n,o,r,i,a,s,c,p;!function(e){e.PageResume="pageResume",e.PagePause="pagePause",e.DebugPanelClick="tinyRemoteDebugPanelButtonClick",e.DebugConsole="onTinyDebugConsole",e.DebugNetworkRequest="tinyAppRemoteDebug_network_request",e.DebugNetworkResponse="tinyAppRemoteDebug_network_response",e.DebugNetworkError="tinyAppRemoteDebug_network_error",e.DebugStorageChanged="tinyAppRemoteDebug_storage",e.MessageFromVConsole="onMessageFromVConsole"}(e||(e={})),function(e){e.GetPagesData="Tiny.Data.getPageData",e.SetPageData="Tiny.Data.setPageData"}(t||(t={})),function(e){e.DataChanged="Tiny.Data.dataChanged"}(n||(n={})),function(e){e.GetStorageInfo="Tiny.Storage.getStorageInfo",e.ClearStorage="Tiny.Storage.clearStorage",e.RemoveStorage="Tiny.Storage.removeStorage",e.SetStorage="Tiny.Storage.setStorage"}(o||(o={})),function(e){e.StorageChanged="Tiny.Storage.storageChanged"}(r||(r={})),function(e){e.Enable="MiniAppLog.enable"}(i||(i={})),function(e){e.ApiSyncCall="MiniAppLog.onApiSyncCall",e.ApiSyncCallback="MiniAppLog.onApiSyncCallback",e.ApiCall="MiniAppLog.onApiCall",e.ApiCallback="MiniAppLog.onApiCallback",e.SetData="MiniAppLog.onSetData",e.SetDataCallback="MiniAppLog.onSetDataCallback",e.ShareAppMessage="MiniAppLog.onShareAppMessage"}(a||(a={})),function(e){e.consoleAPICalled="Runtime.consoleAPICalled",e.executionContextDestroyed="Runtime.executionContextDestroyed",e.executionContextsCleared="Runtime.executionContextsCleared",e.executionContextCreated="Runtime.executionContextCreated"}(s||(s={})),function(e){e.RequestWillBeSent="Network.requestWillBeSent",e.ResponseReceived="Network.responseReceived",e.LoadingFinished="Network.loadingFinished",e.LoadingFailed="Networkw.loadingFailed",e.GetResponseBody="Network.getResponseBody"}(c||(c={})),function(e){e.Data="data",e.Storage="storage",e.AppLog="applog"}(p||(p={}));var u=Date.now()%1e9;function l(e){this.name="__st"+(1e9*Math.random()>>>0)+u+++"__",e&&e.forEach&&e.forEach(this.add,this)}var g=l.prototype;g.add=function(e){var t=this.name;return e[t]||Object.defineProperty(e,t,{value:!0,writable:!0}),this},g.delete=function(e){return!!e[this.name]&&(e[this.name]=void 0,!0)},g.has=function(e){return!!e[this.name]};var f=l,d=self;var h="[DEBUG]";function _(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,[h].concat(e))}var y=function(){},m=d.importScripts,S=!1,O=[];function b(){return d.__appxStartupParams&&d.__appxStartupParams.appId?d.__appxStartupParams:d.AFAppX&&d.AFAppX.bridge&&d.AFAppX.bridge.callSync&&d.AFAppX.bridge.callSync("getStartupParams")||{}}var k=function(){var e="undefined"==typeof WeakSet?new f:new WeakSet;return function(t,n){if("object"==typeof n&&null!==n)try{if(e.has(n))return;e.add(n)}catch(e){console.error(e)}return n}};function A(e){return JSON.stringify(e,k())}var v=function(e,t){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function L(e,t){function n(){this.constructor=e}v(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var P=function(){return(P=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},C={0:{openchannel:"openchannel.alipay.com",hpmweb:"hpmweb.alipay.com"},1:{openchannel:"miniprogram.alipay.com",hpmweb:"hpmweb.alipay.com"},2:{openchannel:"openchannel-pre.alipay.com",hpmweb:"hpmweb-pre.alipay.com"}};var E,D=function(){function e(e){this.url="",this.opened=!1,e&&(this.url=e),this.onSocketError=this.onSocketError.bind(this),this.onSocketClose=this.onSocketClose.bind(this),this.onSocketMessage=this.onSocketMessage.bind(this),this.onSocketOpen=this.onSocketOpen.bind(this)}return Object.defineProperty(e.prototype,"isSocketOpened",{get:function(){return this.opened},enumerable:!1,configurable:!0}),e.prototype.setUrl=function(e){this.url=e},e}();"undefined"!=typeof WebSocket&&WebSocket.OPEN&&(E=WebSocket);var w,x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageBeforeSocketOpen=[],t}return L(t,e),t.prototype.open=function(){var e=this;if(!this.url)throw new Error("WebSocket url required");this.socket=new E(this.url),this.socket.onopen=this.onSocketOpen,this.socket.onmessage=function(t){"string"==typeof t.data?e.onSocketMessage(t.data):console.warn("[DEBUG] invalid message",t.data)},this.socket.onclose=this.onSocketClose,this.socket.onerror=this.onSocketError},t.prototype.close=function(){this.socket&&this.socket.close()},t.prototype.sendSocketMessage=function(e){var t="string"==typeof e?e:JSON.stringify(e);t.length>5e6||(this.opened?this.socket.send(t):this.messageBeforeSocketOpen.push(t))},t.prototype.onSocketMessage=function(e){},t.prototype.onSocketOpen=function(){var e=this;this.opened=!0,this.messageBeforeSocketOpen.length&&(this.messageBeforeSocketOpen.forEach((function(t){e.sendSocketMessage(t)})),this.messageBeforeSocketOpen=[])},t.prototype.onSocketClose=function(){this.opened=!1,console.log("[DEBUG] connection closed")},t.prototype.onSocketError=function(e){console.error("[DEBUG] connection onerror",e)},t}(D),R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageBeforeSocketOpen=[],t}return L(t,e),t.prototype.open=function(){var e=this;this.socketTask=AFAppX.bridge.connectSocket({url:this.url,multiple:!0,fail:function(t){e.onSocketError(t)}}),this.socketTask.onOpen((function(){e.handleSocketOpen()})),this.socketTask.onError((function(t){e.onSocketError(t.data)})),this.socketTask.onClose((function(){e.opened=!1,e.onSocketClose()})),this.socketTask.onMessage((function(t){e.opened||e.handleSocketOpen(),e.onSocketMessage(t.data.data)}))},t.prototype.sendSocketMessage=function(e){var t="string"==typeof e?e:JSON.stringify(e);t.length>5e6||(this.opened?this.socketTask.send({data:t,isBuffer:!1}):this.messageBeforeSocketOpen.push(t))},t.prototype.close=function(){this.opened&&this.socketTask.close()},t.prototype.onSocketMessage=function(e){},t.prototype.onSocketOpen=function(){},t.prototype.onSocketError=function(e){},t.prototype.onSocketClose=function(){},t.prototype.handleSocketOpen=function(){var e=this;this.opened||(this.opened=!0,this.messageBeforeSocketOpen.length&&(this.messageBeforeSocketOpen.forEach((function(t){e.sendSocketMessage(t)})),this.messageBeforeSocketOpen=[]),this.onSocketOpen())},t}(D),j=function(){this.channelConfigKey="0",this.silentMode=!1,this.userAgent="undefined"!=typeof navigator?navigator.swuserAgent||navigator.userAgent:"",this.isIOS=/iPhone|iPad|iOS/i.test(this.userAgent),this.isLyra=/LyraVM/i.test(this.userAgent),this.startupParams=b(),this.channelId=this.startupParams.channelId,"string"==typeof __BUGME_EXTERNAL_CHANNEL__&&__BUGME_EXTERNAL_CHANNEL__&&(this.channelId=__BUGME_EXTERNAL_CHANNEL__,this.silentMode=!0),this.isLyra&&(this.silentMode=!0),this.startupParams.remoteCh&&(this.channelConfigKey=String(this.startupParams.remoteCh))},N=function(){function e(){this.records=new Map}return e.prototype.setRequest=function(e,t){this.records.set(e,P(P({},this.records.get(e)||{}),t))},e.prototype.getRequest=function(e){return this.records.get(e)},e.prototype.removeRequest=function(e){this.records.has(e)&&this.records.delete(e)},e}(),B=function(){function e(e){void 0===e&&(e=[]),this._messageQueue=e,this._queueSize=0,this.isApplogEnabled=!1}return e.prototype.push=function(e){this._queueSize;var t=function(e){var t="string"==typeof e?e:JSON.stringify(e);return t.length>5e6?void console.warn("abort send websocket message due to size:",t.length):t}(e);null!=t&&(this._messageQueue.push(t),this._queueSize+=t.length)},e.prototype.sendQueuedMessages=function(){if(0!==this._messageQueue.length){var e=M().getWorkerSocket();e&&(this._messageQueue.forEach((function(t){return e.send(t)})),this._messageQueue=[],this._queueSize=0)}},e.prototype.setApplogEnabled=function(e){this.isApplogEnabled=e},e}(),T=function(){function e(){}return e.prototype.getAgentContext=function(){return this.agentContext||(this.agentContext=new j),this.agentContext},e.prototype.setWorkerSocket=function(e){this.workerSocket=e},e.prototype.getWorkerSocket=function(){return this.workerSocket},e.prototype.getNetworkRecorder=function(){return this.networkRecorder||(this.networkRecorder=new N),this.networkRecorder},e.prototype.getMessageQueue=function(){return null==this.messageQueue&&(this.messageQueue=new B),this.messageQueue},e}();function M(){return w||(w=new T),w}var I=function(e,t,n,o,r){var i,a,s=null,c=0;r||(r={});var p=function(){c=!1===r.leading?0:Date.now(),s=null,a=e.apply(null,i),i=null};return function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var g=Date.now();c||!1!==r.leading||(c=g);var f=t-(g-c);return i=u,f<=0||f>t?(o(s),s=null,c=g,a=e.apply(null,i),i=null):s||!1===r.trailing||(s=n(p,f)),a}}((function(){var e=M().getWorkerSocket();e&&e.send({method:n.DataChanged,ext:{origin:p.Data}})}),300,setTimeout,clearTimeout);function X(e){if(d.__APPX_DEVTOOLS_GLOBAL_HOOK__&&d.__APPX_DEVTOOLS_GLOBAL_HOOK__[e]&&"function"==typeof d.__APPX_DEVTOOLS_GLOBAL_HOOK__[e])return d.__APPX_DEVTOOLS_GLOBAL_HOOK__[e]}var G=console.error;function q(){null==d.__APPX_DEVTOOLS_GLOBAL_HOOK__&&(d.__APPX_DEVTOOLS_GLOBAL_HOOK__={});var e={onSetData:X("onSetData"),onSetDataCallback:X("onSetDataCallback"),onApiSyncCall:X("onApiSyncCall"),onApiSyncCallback:X("onApiSyncCallback"),onApiCall:X("onApiCall"),onApiCallback:X("onApiCallback"),onError:X("onError")};d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onSetData=function(t){try{if(e.onSetData)try{e.onSetData.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}I(),W({method:a.SetData,params:F(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onSetDataCallback=function(t){try{if(e.onSetDataCallback)try{e.onSetDataCallback.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}W({method:a.SetDataCallback,params:t,ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiSyncCall=function(t){try{if(e.onApiSyncCall)try{e.onApiSyncCall.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}W({method:a.ApiSyncCall,params:H(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiSyncCallback=function(t){try{if(e.onApiSyncCallback)try{e.onApiSyncCallback.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}W({method:a.ApiSyncCallback,params:H(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiCall=function(t){try{if(e.onApiCall)try{e.onApiCall.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}W({method:a.ApiCall,params:H(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiCallback=function(t){try{if(e.onApiCallback)try{e.onApiCallback.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){y(e)}W({method:a.ApiCallback,params:H(t),ext:{origin:p.AppLog}})}catch(e){}},d.__APPX_DEVTOOLS_GLOBAL_HOOK__.onError=function(t){try{if(e.onError)try{e.onError.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){}!function(e){var t=new Error(e.formatted.message);t.stack=e.formatted.stack,setTimeout(G.bind(console,t))}(t)}catch(e){}},function(e,t){for(var n=["onPageLoad","onPageShow","onPageHide","onPageReady","onPageUnload","onPageUpdate"],o=0,r=n;o<r.length;o++){t[c=r[o]]=X(c)}for(var i=function(n){e[n]=function(e){try{if(t[n])try{t[n].call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}catch(e){y(e)}var o=e.context?e:P({route:e.page.route},e);W({method:"MiniAppLog."+n,params:o,ext:{origin:p.AppLog}})}catch(e){}}},a=0,s=n;a<s.length;a++){var c;i(c=s[a])}}(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e),function(e,t){t.onPageLifecycle=X("onPageLifecycle"),e.onPageLifecycle=function(e){try{if(t.onPageLifecycle)try{t.onPageLifecycle.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}catch(e){y(e)}var n=function(e){var t;switch(e){case 0:t="onPageLoad";break;case 2:t="onPageReady";break;case 1:t="onPageShow";break;case 3:t="onPageHide";break;case 4:t="onPageUnload"}return t}(e.args[0]);if(!n)return;W({method:"MiniAppLog."+n,params:e,ext:{origin:p.AppLog}}),"onPageShow"===n&&I()}catch(e){}}}(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e),function(e,t){for(var n=["onAppLaunch","onAppShow","onAppHide","onAppError","onAppUnhandledRejection"],o=0,r=n;o<r.length;o++){t[c=r[o]]=X(c)}for(var i=function(n){e[n]=function(e){try{if(t[n])try{t[n].call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}catch(e){y(e)}W({method:"MiniAppLog."+n,params:e,ext:{origin:p.AppLog}})}catch(e){}}},a=0,s=n;a<s.length;a++){var c;i(c=s[a])}}(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e),function(e,t){t.onAppLifecycle=X("onAppLifecycle"),e.onAppLifecycle=function(e){try{if(t.onAppLifecycle)try{t.onAppLifecycle.call(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}catch(e){y(e)}W({method:"MiniAppLog."+e.args[0],params:e,ext:{origin:p.AppLog}})}catch(e){}}}(d.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}function W(e){try{var t=M().getWorkerSocket(),n=M().getMessageQueue();t&&n.isApplogEnabled?t.send(A(e)):n.push(A(e))}catch(e){}}function H(e){if(e.context){var t=e.context;return P(P({},e),{context:K(t,["apiName","extraInfo","isMiniExtension","option","startTime","taskId","__reqId"])})}return e}function F(e){return e.context?e:{pagePath:e.isPage?e.page.route:e.component.$page.route,isPage:e.isPage,option:e.options,componentIs:e.component?e.component.is:void 0}}function K(e,t){var n={};return t.forEach((function(t){n[t]=e[t]})),n}var V,U=function(){function e(e){this.objectStore=e}return e.prototype.mapFrom=function(e){var t=this;return Array.from(e).map((function(e){return t.mapFromOne(e)}))},e.prototype.mapFromOne=function(e){switch(typeof e){case"string":return this.mapString(e);case"number":return this.mapNumber(e);case"object":return Array.isArray(e)?this.mapArray(e):null===e?this.mapNull():this.mapObject(e);case"function":return this.mapFunction(e);case"undefined":return this.mapUndef();case"boolean":return this.mapBoolean(e);default:return{type:typeof e,value:e}}},e.prototype.mapString=function(e){return{type:"string",value:e}},e.prototype.mapNumber=function(e){return{type:"number",value:e,description:String(e)}},e.prototype.mapBoolean=function(e){return{type:"boolean",value:e}},e.prototype.mapFunction=function(e){var t=this.objectStore.save(e);return{type:"function",className:"Function",description:e.toString(),objectId:t}},e.prototype.mapUndef=function(){return{type:"undefined"}},e.prototype.mapNull=function(){return{type:"object",subtype:"null",value:null}},e.prototype.mapObject=function(e){var t,n,o=this,r=Object.getOwnPropertyDescriptors(e),i=Object.keys(r),a=this.objectStore.save(e),s=e.constructor?e.constructor.name:"Object",c={type:"object",className:s,description:s,objectId:a,preview:{type:"object",description:s,overflow:i.length>5,properties:i.slice(0,5).map((function(e){return o.mapObjectProperty(e,r[e])})).filter(Boolean)}};return e instanceof Error?(t="error",n=e.stack):e instanceof Date?(t="date",n=e.toString()):e instanceof RegExp?(t="regexp",n=e.toString()):e instanceof Promise&&(t="promise",n="Promise"),t&&(c.subtype=t,c.preview&&(c.preview.subtype=t)),n&&(c.description=n,c.preview&&(c.preview.description=n)),c},e.prototype.mapArray=function(e){var t="Array("+e.length+")";return{type:"object",subtype:"array",className:"Array",description:t,objectId:this.objectStore.save(e),preview:{type:"object",subtype:"array",description:t,overflow:!1,properties:this.mapArrayProperties(e)}}},e.prototype.mapArrayProperties=function(e){return e.map((function(e,t){if("function"==typeof e)return{name:String(t),type:"function",value:""};var n={name:String(t),type:typeof e,value:"object"==typeof e&&e?e.constructor&&e.constructor.name||"Object":String(e)};return null===e?n.subtype="null":Array.isArray(e)&&(n.subtype="array"),n}))},e.prototype.mapObjectProperty=function(e,t){if(t.get)return{name:e,type:"accessor"};if(!t.set){var n=t.value;switch(typeof n){case"object":return Array.isArray(n)?{name:e,type:"object",subtype:"array",value:"Array("+n.length+")"}:null===n?{name:e,type:"object",subtype:"null",value:"null"}:{name:e,type:"object",value:n.constructor?n.constructor.name:"Object"};case"function":return{type:"function",value:"",name:e};default:return{name:e,type:typeof n,value:String(n)}}}},e}(),z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return L(t,e),t.prototype.mapFrom=function(e){var t=this;return e.split("\n").slice(2).map((function(e,n){return t.testType1(e)?t.extractType1(e):t.testType2(e)?t.extractType2(e):void 0})).filter((function(e){return null!=e}))},t}(function(){function e(){this.e1=/\s*at\s(\S+)\s(\S+)\:(\d+)\:(\d+)\)/,this.e2=/\s*at\s(\S+)\:(\d+)\:(\d+)/}return e.prototype.testType1=function(e){return this.e1.test(e)},e.prototype.testType2=function(e){return this.e2.test(e)},e.prototype.extractType1=function(e){var t=e.match(this.e1);return null==t?null:{functionName:t[1],url:t[2].slice(1),lineNumber:Number(t[3]),columnNumber:Number(t[4])}},e.prototype.extractType2=function(e){var t=e.match(this.e2);return null==t?null:{functionName:"",url:t[1].slice(1),lineNumber:Number(t[2]),columnNumber:Number(t[3])}},e}()),Q=function(){function e(){this.id=0,this.id2Object=new Map,this.object2Id=new Map}return e.prototype.save=function(e){if(this.object2Id.has(e))return this.object2Id.get(e);var t=this.getNextObjectId();return this.id2Object.set(t,e),this.object2Id.set(e,t),t},e.prototype.query=function(e){return this.id2Object.get(e)},e.prototype.clear=function(e){var t=this.id2Object.get(e);t&&(this.id2Object.delete(e),this.object2Id.delete(t))},e.prototype.clearAll=function(){this.id2Object.clear(),this.object2Id.clear()},e.prototype.getNextObjectId=function(){return this.id++,'{"injectedScriptId":1,"id":'+this.id+"}"},e}(),J=function(){function e(e,t){this.objectStore=e,this.objectMapper=t}return e.prototype.handle=function(e){var t=this.objectStore.query(e.objectId);return t?{result:this.mapObject(t,Boolean(e.ownProperties),Boolean(e.accessorPropertiesOnly))}:{result:[]}},e.prototype.mapObject=function(e,t,n){var o=this;if(t){var r=Object.getOwnPropertyDescriptors(e),i=Object.keys(r).filter((function(e){return!(n&&!r[e].get&&!r[e].set)})).map((function(e){return o.mapResultOne(e,r[e],!0)}));return e.__proto__&&i.push(this.mapResultOne("__proto__",{configurable:!0,enumerable:!1,writable:!0,value:e.__proto__},!0)),i}for(var a=[],s={},c=e,p=!1,u=!0,l=function(){var e=Object.getOwnPropertyDescriptors(c);if(Object.keys(e).forEach((function(t){if(!s[t]){s[t]=!0;var r=e[t];(!n||r.get||r.set)&&a.push(o.mapResultOne(t,r,u))}})),!p){var t=Object.getOwnPropertyDescriptor(c,"__proto__");t&&(p=!0,a.push(g.mapResultOne("__proto__",t,u)))}c=c.__proto__,u=!1},g=this;c;)l();return a},e.prototype.mapResultOne=function(e,t,n){var o={writable:t.writable,configurable:Boolean(t.configurable),enumerable:Boolean(t.enumerable),isOwn:n,name:String(e)};return"value"in t&&(o.value=this.objectMapper.mapFromOne(t.value)),t.get&&(o.get=this.objectMapper.mapFromOne(t.get)),t.set&&(o.set=this.objectMapper.mapFromOne(t.set)),o},e}(),$=function(){function e(){this.objectStore=new Q,this.objectMapper=new U(this.objectStore),this.callFramesMapper=new z,this.getPropertiesHandler=new J(this.objectStore,this.objectMapper)}return e.prototype.parseObject=function(e){return this.objectMapper.mapFromOne(e)},e.prototype.getProperties=function(e){return this.getPropertiesHandler.handle(e)},e.prototype.getObjectById=function(e){return this.objectStore.query(e)},e.prototype.consoleAPICalled=function(e,t,n){var o=e;return"warn"===e&&(o="warning"),{method:"Runtime.consoleAPICalled",params:{type:o,args:this.objectMapper.mapFrom(n),executionContextId:1,timestamp:Date.now(),stackTrace:{callFrames:this.callFramesMapper.mapFrom(t)}}}},e}();function Y(){var e="string"==typeof __BUGME_EXTERNAL_CHANNEL__&&__BUGME_EXTERNAL_CHANNEL__||"boolean"==typeof __BUGME_CONSOLE_ENABLE__&&__BUGME_CONSOLE_ENABLE__;console.log("[tinybugme] override console",e),e&&(V=new te).overrideConsole()}function Z(){return V}var ee,te=function(){function e(){this.executionContextId=1,this.messageBeforeAgentInit=[],this.webSocketCheckingLoop=!1,this.parser=new $,this.createExecutionContext()}return e.prototype.createExecutionContext=function(){this.sendMesasge({method:s.executionContextsCleared,params:{}}),this.sendMesasge({method:s.executionContextCreated,params:{context:{id:this.executionContextId,origin:"app://",name:"app"}}})},e.prototype.overrideConsole=function(){var e=this,t=this;Object.defineProperties(console,["debug","log","info","warn","error"].reduce((function(n,o){var r=console[o].bind(console),i=e;return n[o]={value:function(){var e=arguments;try{var n=/^(\[framework\]|dispatchEvent|onMessage push|unsupported protocol)/;if(e.length&&"string"==typeof e[0]&&n.test(e[0]))return r.apply(null,e);var a=new Error;a.stack&&t.sendMesasge(i.parser.consoleAPICalled(o,a.stack,e))}catch(e){}return r.apply(null,e)}},n}),{}))},e.prototype.sendMesasge=function(e){var t=M().getWorkerSocket();t?(this.flushPendingMessasges(),t.sendAfterReceivingMessage(e)):(this.messageBeforeAgentInit.push(e),this.checkWebSocketReady())},e.prototype.flushPendingMessasges=function(){if(this.messageBeforeAgentInit.length){var e=M().getWorkerSocket();e&&(this.messageBeforeAgentInit.forEach((function(t){e.sendAfterReceivingMessage(t)})),this.messageBeforeAgentInit=[])}},e.prototype.checkWebSocketReady=function(){var e=this;if(!this.webSocketCheckingLoop){this.webSocketCheckingLoop=!0;var t=setInterval((function(){M().getWorkerSocket()&&(clearInterval(t),e.flushPendingMessasges())}),1e3)}},e}();function ne(e){if(M().getAgentContext().silentMode)return!1;var t="";switch(e){case ee.Connecting:t="准备中";break;case ee.Connected:t="已连接";break;case ee.Reconnecting:t="重试中";break;case ee.Disconnected:t="已断开"}e===ee.Reconnecting&&(e=ee.Connecting),AFAppX.bridge.call("showRemoteDebugPanel",{status:e,text:"真机调试"+t,buttonTitle:"退出"})}!function(e){e.Connecting="connecting",e.Connected="connected",e.Disconnected="disconnected",e.Reconnecting="reconnecting"}(ee||(ee={}));var oe=Object.freeze({__proto__:null,enable:function(e){M().getWorkerSocket().send({id:e.id,result:{}})},getResponseBody:function(e){var t=e.params.requestId,n=M(),o=n.getNetworkRecorder(),r=o.getRequest(t);r?n.getWorkerSocket().send({id:e.id,result:{base64Encoded:r.isBase64Body,body:r.responseBody}}):n.getWorkerSocket().send({id:e.id,result:{}}),o.removeRequest(t)}});var re="function"==typeof __eval?__eval:"function"==typeof eval?eval:function(){};var ie=Object.freeze({__proto__:null,enable:function(e){M().getWorkerSocket().send({id:e.id,result:{}});var t=Z();t&&t.createExecutionContext()},getProperties:function(e){var t=Z();t&&M().getWorkerSocket().send({id:e.id,result:t.parser.getProperties(e.params)})},compileScript:function(e){M().getWorkerSocket().send({id:e.id,result:{}})},evaluate:function(e){var t=Z();if(t){var n=t.parser;try{var o=re(e.params.expression);M().getWorkerSocket().send({id:e.id,result:{result:n.parseObject(o)}})}catch(t){t.stack=t.name+": "+t.message,M().getWorkerSocket().send({id:e.id,result:{exceptionDetails:{columnNumber:20,exception:n.parseObject(t),exceptionId:1,lineNumber:0,text:"Uncaught"},result:n.parseObject(t)}})}}}});var ae=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){function n(e,t){var n=[],o=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+o.slice(0,n.indexOf(t)).join(".")+"]"}),function(r,i){if(n.length>0){var a=n.indexOf(this);~a?n.splice(a+1):n.push(this),~a?o.splice(a,1/0,r):o.push(r),~n.indexOf(i)&&(i=t.call(this,r,i))}else n.push(i);return null==e?i:e.call(this,r,i)}}(e.exports=function(e,t,o,r){return JSON.stringify(e,n(t,r),o)}).getSerialize=n}));ae.getSerialize;var se=Object.freeze({__proto__:null,getPagesData:function(e){var t=d.getCurrentPages().filter(Boolean).map((function(e){return{viewId:e.$viewId,data:ae(e.data),route:e.route}}));M().getWorkerSocket().send({id:e.id,ext:e.ext,result:{data:t}})},setPageData:function(e){var t=e.params,n=void 0===t?{}:t,o=n.viewId,r=n.data,i=d.getCurrentPages().filter((function(e){return e&&""+e.$viewId===o}))[0];i&&r&&i.setData(r)}});var ce=Object.freeze({__proto__:null,getStorageInfo:function(e){var t=AFAppX.bridge.getStorageInfoSync(),n=t.keys.map((function(e){var t=AFAppX.bridge.getStorageSync({key:e}).data;return{key:e,value:t,type:typeof t}}));M().getWorkerSocket().send({id:e.id,ext:e.ext,result:{currentSize:t.currentSize,limitSize:t.limitSize,data:n}})},clearStorage:function(e){AFAppX.bridge.clearStorageSync()},removeStorage:function(e){var t=e.params,n=void 0===t?{}:t;n.key&&AFAppX.bridge.removeStorageSync({key:n.key})},setStorage:function(e){var t=e.params,n=void 0===t?{}:t;n.key&&AFAppX.bridge.setStorageSync({key:n.key,data:n.value})}});var pe=Object.freeze({__proto__:null,enable:function(){var e=M().getMessageQueue();e.setApplogEnabled(!0),e.sendQueuedMessages()}});var ue=Object.freeze({__proto__:null,Data:se,Storage:ce,Applog:pe,ping:function(e){M().getWorkerSocket().send({id:e.id,result:{}})},getSystemInfo:function(e){var t=AFAppX.bridge.getSystemInfoSync(),n={userAgent:M().getAgentContext().userAgent,sdkVersion:AFAppX.bridge.SDKVersion,alipayVersion:t.version,model:t.model,system:t.system};M().getWorkerSocket().send({id:e.id,result:n})},getStartupParams:function(e){var t=b();M().getWorkerSocket().send({id:e.id,result:t})}});var le=Object.freeze({__proto__:null,getResourceTree:function(e){M().getWorkerSocket().send({id:e.id,result:{}})}}),ge=Object.freeze({__proto__:null,Network:oe,Runtime:ie,Tiny:ue,Page:le}),fe=!1;if("undefined"!=typeof WebSocket&&WebSocket.OPEN){fe=!0;try{delete d.WebSocket}catch(_){}}var de=function(e){function t(t){var n=e.call(this,t)||this;return n.isMessageReceived=!1,n.isSocketOpenedOnce=!1,n.messageBeforeReceived=[],n.isDebugExited=!1,ne(ee.Connecting),n}return L(t,e),t.prototype.send=function(e){return this.sendSocketMessage(e)},t.prototype.sendAfterReceivingMessage=function(e){this.isMessageReceived?this.send(e):this.messageBeforeReceived.push("string"==typeof e?e:JSON.stringify(e))},t.prototype.exitDebug=function(){this.isDebugExited=!0,ne(ee.Disconnected),this.close(),!fe&&M().getAgentContext().isIOS&&[1,2].forEach((function(e){AFAppX.bridge.call("closeSocket",{socketTaskId:e})}))},t.prototype.onSocketOpen=function(){e.prototype.onSocketOpen.call(this),this.isSocketOpenedOnce=!0,clearInterval(this.reconnectInterval),this.send({method:i.Enable,params:{},ext:{origin:p.AppLog}}),this.send({method:n.DataChanged,ext:{origin:p.Data}})},t.prototype.onSocketClose=function(){e.prototype.onSocketClose.call(this),this.isDebugExited||this.reconnect()},t.prototype.onSocketError=function(e){this.isSocketOpenedOnce||M().getAgentContext().silentMode||(ne(ee.Disconnected),AFAppX.bridge.showToast({content:"本次真机调试已结束，请重新生成调试版本",duration:2e3,success:function(){}}))},t.prototype.onSocketMessage=function(e){var t,n=this;this.isMessageReceived||(this.isMessageReceived=!0,this.messageBeforeReceived.forEach((function(e){n.send(e)})),this.messageBeforeReceived=[]);try{t=JSON.parse(e)}catch(t){return void("CLIENT:JOIN"===e?ne(ee.Connected):"CLIENT:LEAVE"===e&&this.exitDebug())}var o=function(e){if(!e)return;for(var t=e.split("."),n=ge,o=0,r=t;o<r.length;o++){var i=r[o];if(!(n=n[i]))break}return n}(t.method);o?o(t):this.send({id:t.id,error:{code:-32e3,message:"unsupported"}})},t.prototype.reconnect=function(){var e=this;ne(ee.Reconnecting),clearInterval(this.reconnectInterval),this.reconnectInterval=setInterval((function(){e.isSocketOpened?clearInterval(e.reconnectInterval):e.open()}),2e3)},t}(fe?x:R);var he=/\/tyro\/agent$/,_e=function(){function t(){this.isIOS=M().getAgentContext().isIOS,this.isLyra=M().getAgentContext().isLyra}return t.prototype.setup=function(){this.isLyra||this.isIOS?this.listenDebugEvent4IOS():this.listenDebugEvent()},t.prototype.onNetworkRequest=function(e){if(!he.test(e.url)){var t=(e.method||"GET").toUpperCase(),n=ye(e.headers),o={method:c.RequestWillBeSent,params:{documentURL:"",loaderId:"",requestId:e.requestId,request:{method:t,url:e.url,headers:n,postData:"POST"===t?e.postBody:"",mixedContentType:"none",initialPriority:"HIGH",isLinkPreload:!1},timestamp:me(),type:"XHR"}},r=M();r.getWorkerSocket().send(o),r.getNetworkRecorder().setRequest(e.requestId,{method:t,requestHeaders:n,url:e.url})}},t.prototype.onNetworkResponse=function(e){if(!he.test(e.url)){var t=M(),n=t.getNetworkRecorder().getRequest(e.requestId)||{},o={method:c.ResponseReceived,params:{requestId:e.requestId,loaderId:"",type:"XHR",timestamp:me(),response:{url:n.url||"",status:e.status,method:n.method||"",headers:ye(e.headers),requestHeaders:n.requestHeaders,connectionReused:!1,encodedDataLength:0,securityState:"unknown",statusText:"",protocol:"",mimeType:e.headers["Content-Type"]||e.headers["content-type"]}}};t.getWorkerSocket().send(o);var r={method:c.LoadingFinished,params:{requestId:e.requestId,timestamp:me(),encodedDataLength:0}};t.getWorkerSocket().send(r),t.getNetworkRecorder().setRequest(e.requestId,{responseBody:e.body,isBase64Body:!1})}},t.prototype.onNetworkError=function(e){if(!he.test(e.url)){var t={method:c.LoadingFailed,params:{canceled:!1,errorText:e.errorMsg||"",requestId:e.requestId,timestamp:me(),type:"XHR"}};M().getWorkerSocket().send(t)}},t.prototype.onStorageChanged=function(e){var t={};Object.keys(e.data).forEach((function(n){try{t[n]=JSON.parse(e.data[n]).APDataStorage}catch(e){}})),M().getWorkerSocket().send({method:r.StorageChanged,params:{data:t},ext:{origin:p.Storage}})},t.prototype.listenDebugEvent4IOS=function(){var t=this,n=AFAppX.bridge;n.on(e.DebugNetworkRequest,(function(e){t.onNetworkRequest(e.data)})),n.on(e.DebugNetworkResponse,(function(e){t.onNetworkResponse(e.data)})),n.on(e.DebugNetworkError,(function(e){t.onNetworkError(e.data)})),n.on(e.DebugStorageChanged,(function(e){t.onStorageChanged(e.data)}))},t.prototype.listenDebugEvent=function(){var t=this;AFAppX.bridge.on(e.DebugConsole,(function(n){var o,r=n.data,i=r.type,a=r.content;try{o=JSON.parse(a)}catch(e){return}switch(i){case e.DebugNetworkRequest:t.onNetworkRequest(o);break;case e.DebugNetworkResponse:t.onNetworkResponse(o);break;case e.DebugNetworkError:t.onNetworkError(o);break;case e.DebugStorageChanged:t.onStorageChanged(o)}}))},t}();function ye(e){if(!e||"object"!=typeof e)return{};var t={};return Object.keys(e).forEach((function(n){t[n]=""+e[n]})),t}function me(){return Date.now()/1e3}var Se,Oe=function(){function t(){this.inited=!1}return t.prototype.setup=function(){if(this.inited)return!1;var t=AFAppX.bridge;if(/^1\./.test(t.SDKVersion)){var n=function(e,t,n,o){var r;return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];o(r),r=n((function(){e.apply(null,i)}),t)}}(this.onPageResumeOrPause.bind(this),300,setTimeout,clearTimeout);t.on(e.PageResume,n),t.on(e.PagePause,n)}t.on(e.DebugPanelClick,this.onDebugPanelClick),this.debugEventListener=new _e,this.debugEventListener.setup(),this.inited=!0},t.prototype.onPageResumeOrPause=function(){var e=M().getWorkerSocket();e&&e.send({method:n.DataChanged,params:{},ext:{origin:p.Data}})},t.prototype.onDebugPanelClick=function(){var e=M().getWorkerSocket();e&&e.exitDebug()},t}();var be,ke=function(){function e(){}return e.prototype.initGlobalListener=function(){(Se||(Se=new Oe),Se).setup()},e.prototype.init=function(){this.makeConnection(),this.printSDKVersion()},e.prototype.makeConnection=function(){var e=M(),t=function(){if("string"==typeof __BUGME_EXTERNAL_WORKER_URL__&&__BUGME_EXTERNAL_WORKER_URL__)return __BUGME_EXTERNAL_WORKER_URL__;var e=M().getAgentContext(),t=e.channelId,n=e.channelConfigKey;return"wss://"+(C[n]||C[0]).hpmweb+"/bugme/client_w/"+t}(),n=new de(t);e.setWorkerSocket(n),e.getAgentContext().isIOS?n.open():setTimeout((function(){n.open()}),1200)},e.prototype.printSDKVersion=function(){var e=AFAppX.bridge.SDKVersion;/^2\./.test(e)&&setTimeout(console.log.bind(console,"SDKVersion: "+e))},e}();function Ae(){return be||(be=new ke),be}if(!d.__BUGME_ON__){d.__BUGME_ON__=!0;try{!function(){try{q(),Y(),(t=Object.getOwnPropertyDescriptor(d,"requirePlugin"))&&!t.configurable||(t&&(e=d.requirePlugin),Object.defineProperty(d,"requirePlugin",{get:function(){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=Date.now();W({method:a.ApiSyncCall,params:{aTime:o,context:{apiName:"requirePlugin",option:{arguments:t}}},ext:{origin:p.AppLog}});try{var r=e.apply(void 0,t);return W({method:a.ApiSyncCallback,params:{args:r?void 0:[{error:1,errorMessage:"未找到对应插件"}],bTime:Date.now()===o?o+.01:Date.now(),context:{apiName:"requirePlugin"}},ext:{origin:p.AppLog}}),r}catch(e){throw W({method:a.ApiSyncCallback,params:{args:[{error:2,errorMessage:e.message}],bTime:Date.now()===o?o+.01:Date.now(),context:{apiName:"requirePlugin"}},ext:{origin:p.AppLog}}),e}}},set:function(t){e=t},enumerable:!0,configurable:!0}))}catch(e){_("sync task error",e)}var e,t;!function(e){if(d.AFAppX)return S=!0,void e();d.importScripts=function(e){m(e),!S&&/af-appx\.worker\.min\.js$/.test(e)&&(S=!0,O.forEach((function(e){return e()})),O=[])},O.push(e)}((function(){try{!function e(){setTimeout((function(){try{Ae().initGlobalListener()}catch(t){return e()}Ae().init()}),1e3)}()}catch(e){_("async task error",e)}}))}()}catch(e){_("init error",e)}}}();
 /**! __BUGME_END__ */;/**! __TAOJIMU_START__ */ !function(){"use strict";var e,t=self;function n(t){return e.apply(this,arguments)}void 0===t?t={App:App,Page:Page,AFAppX:{requirePlugin:(e=function(t){return requirePlugin(t)},n.toString=function(){return e.toString()},n),bridge:my},my:my}:t.my=t.AFAppX.bridge;var A=t,t=Object.prototype,r=t.toString,o=t.hasOwnProperty;function b(t){return"[object Object]"===r.call(t)}function R(t){return"[object Function]"===r.call(t)}"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)o.call(r,i)&&(e[i]=r[i])}return e},writable:!0,configurable:!0}),String.prototype.padStart||(String.prototype.padStart=function(t,e){return t>>=0,e=String(void 0!==e?e:" "),this.length>t?String(this):((t-=this.length)>e.length&&(e+=e.repeat(t/e.length)),e.slice(0,t)+String(this))});function a(){}(t=i.prototype).show=function(i){var o=this;return(i=(i=void 0===i?{}:i)||{}).duration=void 0===i.duration?2e3:i.duration,new Promise(function(t){var e=R(i.success)?i.success:a,n=R(i.fail)?i.fail:a,r=R(i.complete)?i.complete:a;return Object.assign(i,{success:function(){try{e()}catch(t){}t()},fail:function(){try{n()}catch(t){}t()},complete:function(){try{r()}catch(t){}t()}}),o.origShow(i)})},t.hide=function(i){var o=this;return i=(i=void 0===i?{}:i)||{},new Promise(function(t){var e=R(i.success)?i.success:a,n=R(i.fail)?i.fail:a,r=R(i.complete)?i.complete:a;return Object.assign(i,{success:function(){try{e()}catch(t){}t()},fail:function(){try{n()}catch(t){}t()},complete:function(){try{r()}catch(t){}t()}}),o.origHide(i)})};var j=i;function i(t){var r=this,t=void 0===t?{show:my.showToast,hide:my.hideToast}:t,e=t.show,e=void 0===e?my.showToast:e,t=t.hide,t=void 0===t?my.hideToast:t;this.showToast=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.promise=r.promise.then(function(){return r.show.apply(r,e)}),r.promise},this.hideToast=function(){return r.promise=Promise.resolve(),r.hide()},this.origShow=e,this.origHide=t,this.promise=Promise.resolve()}function s(t){this.size=0,this.limit=t,this.head=this.tail=void 0,this._keymap=Object.create(null)}var t=s.prototype,x=(t.put=function(t,e){var n,r=this.get(t,!0);return r||(this.size===this.limit&&(n=this.shift()),this._keymap[t]=r={key:t},this.tail?(this.tail.newer=r).older=this.tail:this.head=r,this.tail=r,this.size++),r.value=e,n},t.shift=function(){var t=this.head;return t&&(this.head=this.head.newer,this.head.older=void 0,t.newer=t.older=void 0,this._keymap[t.key]=void 0,this.size--),t},t.get=function(t,e){t=this._keymap[t];if(void 0!==t)return t===this.tail||(t.newer&&(t===this.head&&(this.head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=void 0,t.older=this.tail,this.tail&&(this.tail.newer=t),this.tail=t),e?t:t.value},/[#?].*$/),O=/([^=&?/#]+)=?([^&#?]*)/g,E=/(?!^)=|&/,T={},C=new s(10);function I(t,e,n){try{n=decodeURIComponent(n)}catch(t){}T[e]=n}function _(t,n){var r,i=[];return b(n=void 0===n?{}:n)&&Object.keys(n).forEach(function(t){var e=""+(null!=(e=n[t])?e:""),e=encodeURIComponent(e);i.push(r=t+"="+e)}),r&&(t+=(t&&(~t.indexOf("?")?"&":"?"))+i.join("&")),t}function F(){Array.isArray(A.injectHistroy)||(A.injectHistroy=[]);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];A.injectHistroy.push([].concat(e))}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){var n,r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length)return r&&(t=r),n=0,function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var p,l,t={exports:{}};function f(t){if(l[t])return l[t].exports;var e=l[t]={i:t,l:!1,exports:{}};return p[t].call(e.exports,e,e.exports,f),e.l=!0,e.exports}t.exports=(p=[function(t,e,n){Date.now=Date.now||function(){return(new Date).getTime()};var r=["//hmma.baidu.com","//arms-retcode","//retcode.taobao.com","//retcode-sg-lazada.arms.aliyuncs.com","//wpk-gateway","//px.ucweb.com","//px.effirst.com","//px-intl.ucweb.com"];t.exports={noop:function(){},uuid:function(){var n=Date.now();return"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now&&(n+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"===t?e:11&e).toString(16)})},timestamp:function(t){var e=+new Date;return e=!0===t?Math.floor(e/1e3):e},generateSeq:function(){return this.timestamp()+Math.floor(10*Math.random())},isFunc:function(t){return"function"==typeof t},isArray:function(t){return"[object Array]"==={}.toString.call(t)},isObject:function(t){return"object"==typeof t},isError:function(t){var e={}.toString.call(t);return this.isObject(t)&&("[object Error]"===e||"[object Exception]"===e||e instanceof Error)},isEmpty:function(t){return null==t||""===t},print:function(t,e){if("undefined"!=typeof console&&this.isFunc(console.warn))return this.callFuncSafely(console.warn,["[itrace] "+t,e])},callFuncSafely:function(t,e,n){if(!this.isFunc(t))return n;try{return t.apply(this,e)}catch(t){return n}},versionCompare:function(t,e){try{for(var n,r,i=t.split("."),o=e.split("."),a=i.length,s=0;s<a;s++)if((n=parseInt(i[s]))!==(r=parseInt(o[s])))return r<n;return!0}catch(t){}return!1},extend:function(t){for(var e=1,n=arguments.length;e<n;e++){var r,i=arguments[e];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},createObject:function(t){if("function"==typeof Object.create)return Object.create(t);function e(){}return e.prototype=t,new e},inherit:function(t,e){e=this.createObject(e.prototype);(e.constructor=t).prototype=e},checkValid:function(t){return void 0!==t&&void 0!==t.bid},canReport:function(t){return!!t&&0!==t&&(1<=t||"100%"===t||(/^\d+(\.\d+)?%$/.test(t)?Math.random()<parseFloat(t)/100:0<t&&t<1&&Math.random()<t))},categoryToType:function(t){var e;switch(t){case 1:e="jserr";break;case 2:e="api";break;case 5:e="flow";break;case 10:e="l4hperf";break;case 11:e="pperf";break;default:e="jssdkidx"}return e},objToQueryString:function(t){var e,n=[];for(e in t)n.push(e+"="+t[e]);return n.join("&")},objToJsonString:function(t){return"undefined"!=typeof JSON?JSON.stringify(t):t.toString()},genContentHash:function(t){var e="";switch(t.category){case 1:e=[t.category,String(t.uid),t.w_url,t.w_ref,t.w_msg||"",t.w_line||"",t.w_col||""].join("");break;case 4:e=[t.category,String(t.uid),t.w_url,t.w_ref,t.w_res,t.w_type].join("")}return e},parseErrorStack:function(t,e){this.print("receive an error: ",t);var n="";return this.isError(t)&&t.stack?((n=t.stack.split("\n")).shift(),n.join("\n")):"string"==typeof t&&["wechat","Toutiao","devtools"].includes(e)?((n=t.split("\n")).shift(),n.shift(),n.join("\n")):""},delay:function(t,e){return-1!==e&&this.isFunc(setTimeout)?setTimeout(t,e||0):(t(),null)},fetchJconfig:function(t,e,n){var r=this,i=e.gw,e=(delete e.gw,this.objToQueryString(this.extend({ud:this.uuid(),tm:this.timestamp(!0),sign:"a5de0f02673725796ecd3393f1a2427e"},e)));t({url:i+"?wpk-header="+encodeURIComponent(e),success:function(t){r.isFunc(n)&&n(t)},fail:function(t){r.print("fetchJconfig failed: ",t)}})},processRCfg:function(t,e){var n,r,i,o,a=[],s={cver:null,conf:{}};try{var c=this.isObject(t)?t:JSON.parse(t);0===c.code&&(a=c.config||[],s.cver=c.cver);for(var u=a.length,p=0;p<u;p++){var l=a[p],f=l.sdkver;if(n=e,o=void 0,i=function(t,e){return t=t.split("."),e=e.split("."),!(parseInt(t[0])<parseInt(e[0]))&&(parseInt(t[0])>parseInt(e[0])||!(parseInt(t[1])<parseInt(e[1]))&&(parseInt(t[1])>parseInt(e[1])||parseInt(t[2])>=parseInt(e[2])))},!(r=f)||(1===r.length?n===r[0]:2===r.length&&(o=r[0],r=r[1],o&&!r?i(n,o):(!o||!r||i(n,o))&&i(r,n)))){if(l.common&&void 0!==l.common.sampleRate&&(s.conf.all=l.common.sampleRate),l.config)for(var d,h=l.config.length,g=0;g<h;g++)if((d=l.config[g]).type){if(d.category_rate)for(var m in d.category_rate)s.conf[d.type+"@"+m]=d.category_rate[m];void 0!==d.sampleRate&&(s.conf[d.type]=d.sampleRate)}return s}}return s}catch(t){this.print("processRCfg failed: ",t)}},apiSuccess:function(t){return 200<=t&&t<=299},apiIgnore:function(t){if(!t)return!0;for(var e=u(r);!(n=e()).done;){var n=n.value;if(0<=t.indexOf(n))return!0}return!1}}},function(t,e,n){t.exports={sdk:{BID:"wpkreporter",CID:"jssdk",WID_KEY:"__wpkreporterwid_",RCFG_KEY:"__wpkreporterrcfgver_",ver:"1.0.0"},px:{signKey:"Uvn#08uefVdwe&c4",addr:{cn:"https://px.effirst.com/api/v1/jssdk/upload",intl:"https://px-intl.ucweb.com/api/v1/jssdk/upload"},confAddr:{cn:"https://px.effirst.com/api/v1/jconfig",intl:"https://px-intl.ucweb.com/api/v1/jconfig"}},http:{methods:{GET:"GET",PUT:"PUT",POST:"POST",HEAD:"HEAD",DELETE:"DELETE",OPTIONS:"OPTIONS",CONNECT:"CONNECT",TRACE:"TRACE",PATCH:"PATCH"}},category:{JSERR:1,API:2,JSFSPERF:3,RESLOADFAIL:4,FLOW:5,LAUNCH_PERF:10,PAGE_PERF:11},navConn:{types:{BLUETOOTH:"bluetooth",CELLULAR:"cellular",ETHERNET:"ethernet",MIXED:"mixed",NONE:"none",OTHER:"other",UNKNOWN:"unknown",WIFI:"wifi",WIMAX:"wimax"},effectiveTypes:{"2G":"2g","3G":"3g","4G":"4g",SLOW2G:"slow-2g"}}}},function(t,e,n){function r(t){i.call(this,t),this._performance=new a,this.setCommonInfo(),this.jconfig()}var o=n(0),i=n(3),a=n(5);o.inherit(r,i),o.extend(r.prototype,{onAppStartup:function(){this.startTime=Date.now(),this._performance.onAppStartup()},onAppHide:function(){this.visible=!1},onAppShow:function(){this.visible=!0},onPageInit:function(){this._performance.onPageInit()},onPageLoad:function(){this._performance.onPageLoad()},onPageShow:function(){var t=this;t.setSession(),o.delay(function(){t.reportFlow()},50)},onPageReady:function(){var t=this;t._performance.onPageReady(),t.perfUploadAfter!==Number.MAX_VALUE&&(t._perfTimer=o.delay(function(){t._reportPerf()},t.perfUploadAfter))},onPageHide:function(){this.pageTiming=Date.now()-this.sessionStart,this.print("pageTiming",this.pageTiming),this._reportPerf()},onPageUnload:function(){this.print("page unload report perf"),this._reportPerf()},getCurrentPageInfo:function(){return{w_url:this.getCurrentPage()}},wrapApp:function(r){var i=this;return o.extend({},r,{onLaunch:function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments),e=r.onLaunch;try{i.onAppStartup()}catch(t){i.print("onAppStartup failed: ",t)}if(o.isFunc(e))return e.apply(this,t)},onShow:function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments),e=r.onShow;try{i.onAppShow()}catch(t){i.print("onAppShow failed: ",t)}if(o.isFunc(e))return e.apply(this,t)},onHide:function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments),e=r.onHide;try{i.onAppHide()}catch(t){i.print("onAppHide failed: ",t)}if(o.isFunc(e))return e.apply(this,t)},onError:function(e){var t=1===arguments.length?[e]:Array.apply(null,arguments),n=r.onError;try{i.reportJSError(e)}catch(t){i.print("reportJSError failed: ",e)}if(o.isFunc(n))return n.apply(this,t)}})},wrapPage:function(n){var r=this;return o.extend({},n,{onInit:function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments),e=n.onInit;try{r.onPageInit()}catch(t){r.print("onPageInit failed: ",t)}if(o.isFunc(e))return e.apply(this,t)},onLoad:function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments),e=n.onLoad;try{r.onPageLoad()}catch(t){r.print("onPageLoad failed: ",t)}if(o.isFunc(e))return e.apply(this,t)},onShow:function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments),e=n.onShow;try{r.onPageShow()}catch(t){r.print("onPageShow failed: ",t)}if(o.isFunc(e))return e.apply(this,t)},onReady:function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments),e=n.onReady;try{r.onPageReady()}catch(t){r.print("onPageReady failed: ",t)}if(o.isFunc(e))return e.apply(this,t)},onHide:function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments),e=n.onHide;try{r.onPageHide()}catch(t){r.print("onPageHide failed: ",t)}if(o.isFunc(e))return e.apply(this,t)},onUnload:function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments),e=n.onUnload;try{r.onPageUnload()}catch(t){r.print("onPageUnload failed: ",t)}if(o.isFunc(e))return e.apply(this,t)}})},perfMark:function(t,e,n){this._performance.mark(t,e,n)},_reportPerf:function(){if(this._perfTimer&&(this.print("clear perf report timeout"),this._perfTimer=null,clearTimeout(this._perfTimer)),this._performance.uploaded)this.print("data had uploaded, report action will be ignored");else{if(this.disablePagePerf&&!this._performance.launchStage||this.disableLaunchPerf&&this._performance.launchStage)return this._performance.resetAndMarkUpload(),void this.print((this._performance.launchStage?"launch":"page")+" perf disabled log will be ignored");var t=this._performance.toLogData(),e=this._performance.launchStage?"reportLaunchPerf":"reportPagePerf";this._performance.resetAndMarkUpload(),t.indAmount?this[e](t):this.print("not found effective indicator, log will be ignored")}}}),t.exports=r},function(t,e,n){function r(t){a.call(this,t),this.setSession(),this.wid=this.getWid()}var i=n(0),o=n(1),a=n(4);i.inherit(r,a),r.prototype.reportFlow=function(t){return this.report(i.extend((t=t||{})||{},{category:o.category.FLOW,sampleRate:1})),this},r.prototype.reportJSError=r.prototype.reportError=function(t,e){var n;if(e=e||{},!i.isFunc(this.jsErrorFilter)||i.callFuncSafely(this.jsErrorFilter,[t],!0))return n="string"==typeof t&&["wechat","Toutiao","devtools"].includes(this.commonInfo.browser)?t.split("\n")[1]||"":t.toString(),e.w_msg=n,e.category=o.category.JSERR,e.stack=i.parseErrorStack(t,this.commonInfo.browser),e.w_file=t.filename||"",e.w_line=t.lineno||"",e.w_col=t.colno||"",void 0!==this.jsErrorSampleRate&&i.extend(e,{sampleRate:this.jsErrorSampleRate}),this.report(e),this;this.print("reportError filter, err was ignored: ",t)},r.prototype.reportLaunchPerf=function(t){var e;i.isObject(t)?(e=i.extend({},t),!1===(e=i.callFuncSafely(this.launchPerfFilter,[e],!0))?this.print("reportLaunchPerf filter, the log was ignored: ",t):(i.extend(t,e),void 0!==this.launchPerfSampleRate&&i.extend(t,{sampleRate:this.launchPerfSampleRate}),this.report(i.extend(t,{category:o.category.LAUNCH_PERF})))):this.print("reportLaunchPerf, invalid param",t)},r.prototype.reportPagePerf=function(t){var e;i.isObject(t)?(e=i.extend({},t),!1===(e=i.callFuncSafely(this.pagePerfFilter,[e],!0))?this.print("reportPagePerf filter, the log was ignored: ",t):(i.extend(t,e),void 0!==this.pagePerfSampleRate&&i.extend(t,{sampleRate:this.pagePerfSampleRate}),this.report(i.extend(t,{category:o.category.PAGE_PERF})))):this.print("reportPagePerf, invalid param",t)},r.prototype.reportApi=r.prototype.reportApiError=function(t){if(i.isObject(t)){if(i.isObject(t.queryString)&&(t.queryString=i.objToQueryString(t.queryString)),i.isFunc(this.apiFilter)){var e=i.extend({},t),e=i.callFuncSafely(this.apiFilter,[e],!0);if(!1===e)return void this.print("reportError filter, the log was ignored: ",t);i.isObject(e)&&i.extend(t,{status:(e.hasOwnProperty("status")?e:t).status,msg:(e.hasOwnProperty("msg")?e:t).msg,c1:(e.hasOwnProperty("c1")?e:t).c1,c2:(e.hasOwnProperty("c2")?e:t).c2,c3:(e.hasOwnProperty("c3")?e:t).c3,c4:(e.hasOwnProperty("c4")?e:t).c4,c5:(e.hasOwnProperty("c5")?e:t).c5})}e={bid:t.bid||null,rel:t.rel||null,uid:t.uid||null,msg:t.msg||"",w_res:t.url,w_method:t.method,w_param:t.queryString,w_rc:t.status,w_rt:t.spent||"",c1:t.c1,c2:t.c2,c3:t.c3,c4:t.c4,c5:t.c5};this.withBd&&i.extend(e,{w_body:JSON.stringify(t.body)}),this.withHd&&i.extend(e,{k_hd:JSON.stringify(t.headers)}),this.withRsbd&&!i.apiSuccess(t.status)&&i.extend(e,{w_resp:JSON.stringify(t.response)}),this.withRshd&&i.extend(e,{k_rshd:JSON.stringify(t.respHeaders)}),void 0!==this.apiSampleRate&&i.extend(e,{sampleRate:this.apiSampleRate}),this.report(i.extend(e,{category:o.category.API,w_type:16}))}else this.print("reportApiError, invalid param",t);return this},r.prototype.jconfig=function(){},t.exports=r},function(t,e,n){function r(t){this.bid=(t=t||{}).bid,this.uid=t.uid,this.rel=t.rel,this.spa=!0,this.debug=t.debug||!1,!0===this.debug&&this.print("\u5f53\u524d\u5904\u4e8e Debug\u6a21\u5f0f\uff0c\u63a7\u5236\u53f0\u5c06\u4f1a\u6709\u8be6\u7ec6\u7684\u65e5\u5fd7\u8f93\u51fa\u3002"),this.delay=!0===t.delay,this.cluster=t.cluster||"cn",this.sampleRate=t.sampleRate,this.beforeSend=t.beforeSend||null,this.checkHidden=!1!==t.checkHidden,this.jsErrorSampleRate=t.jsErrorSampleRate,this.jsErrorFilter=t.errorFilter||t.jsErrorFilter,this.disableApi=t.disableApi||!1,this.withBd=t.apiBody||!1,this.withRsbd=t.apiResponse||!1,this.withHd=t.apiRequestHeader||!1,this.withRshd=t.apiResponseHeader||!1,this.apiSampleRate=t.apiSampleRate,this.apiFilter=t.apiErrorFilter||t.apiFilter,this.launchPerfSampleRate=t.launchPerfSampleRate,this.launchPerfFilter=t.launchPerfFilter,this.disableLaunchPerf=t.disableLaunchPerf||!1,this.pagePerfSampleRate=t.pagePerfSampleRate,this.pagePerfFilter=t.pagePerfFilter,this.disablePagePerf=t.disablePagePerf||!1,this.perfUploadAfter=t.perfUploadAfter||5e3,this._rcfg_={},this._waitingQueue_=[]}var c=n(0),s=n(1),i=null;r.prototype={constructor:r,VERSION:"1.4.6",_updateWaitingQueue:function(t){this._waitingQueue_.push(t)},ready:function(t){return!0},pxHandle:function(t){var e={app:t.w_bid,cp:"none",de:4,seq:c.generateSeq(),tm:c.timestamp(!0),ud:encodeURIComponent(t.uid),ver:t.w_rel,cver:this.getCVer()||0,rcfg:1,type:t.type,sver:t.sdk_ver,sign:"716eee588641ed67630cce9c8d734784"},n=s.px.addr[this.cluster],e=c.objToQueryString(e),e=(n+="?wpk-header="+encodeURIComponent(e),t._servAddr=n,t._hash=c.genContentHash(t),this.delay&&-1!==[1].indexOf(t.category)),r=(this._updateWaitingQueue(t),this);i=c.delay(function(){r.clearQueue()},e?3e3:-1),this.print("logData: ",t)},report:function(t){if(void 0===(t="string"==typeof t?{category:s.category.JSERR,msg:t}:t).sampleRate&&(t.sampleRate=void 0!==this.sampleRate?this.sampleRate:1),c.canReport(t.sampleRate)){if(this._cleanData(t),this.ready()){var e;if(c.isFunc(this.beforeSend)){try{e=this.beforeSend(t)}catch(t){this.print("exec beforeSend failed:",t)}if(!1===e)return void this.print("beforeSend func return false")}try{var n=t.bid||this.bid,r=t.rel||this.rel,i=(c.isFunc(r)&&(r=r()),t.uid||this.uid),o=(i=(i=c.isFunc(i)?i():i)||this.wid,c.extend(t,this.commonInfo,this.getCurrentPageInfo(),{w_bid:n,w_rel:r,w_spa:this.spa,w_tm:c.timestamp(),w_cnt:1,uid:i,type:c.categoryToType(t.category),sdk_ver:this.VERSION,log_src:this.commonInfo.browser+"_msdk",wid:this.wid,w_sid:this.sid,w_frmid:this.sid}),this.getDyCfg()),a=void 0!==o[t.type+"@"+t.category]?o[t.type+"@"+t.category]:o[t.type];if(void 0!==(a=void 0!==a?a:o.all)&&!c.canReport(a))return void this.print("\u7531\u4e8e\u300c\u52a8\u6001\u914d\u7f6e\u300d\u91c7\u6837\u7387\u63a7\u5236\uff0c\u672c\u6761\u65e5\u5fd7\u6700\u7ec8\u672a\u4e0a\u62a5\uff0c\u7c7b\u578b: "+t.type+"("+t.category+") \u91c7\u6837\u7387: "+a);this.pxHandle(t)}catch(t){this.print("process logData failed: ",t)}}else this._updateWaitingQueue(t);return this}this.print("\u7531\u4e8e\u91c7\u6837\u7387\u63a7\u5236\uff0c\u672c\u6761\u65e5\u5fd7\u6700\u7ec8\u672a\u4e0a\u62a5\uff0c\u91c7\u6837\u7387: ",t.sampleRate)},setConfig:function(t){return c.isObject(t)&&c.extend(this,t),this},getWid:function(){return c.uuid()},getCurrentPageInfo:function(){return{}},setSession:function(){this.sid=c.uuid(),this.sessionStart=Date.now()},getCVer:function(){return this._rcfg_&&this._rcfg_.cver},getDyCfg:function(){return this._rcfg_&&this._rcfg_.conf||{}},getRCfg:function(){return{cver:null,conf:{}}},setRCfg:function(t){},clearQueue:function(){c.isFunc(clearTimeout)&&clearTimeout(i),i=null,this.send()},send:function(){if(this.checkHidden&&!this.visible)this.print("app is unvisible, so the data will be ignore");else{var t,e=function(t){for(var e=[],n=[],r=t.length,i=0;i<r;i++)s=t[i].category,-1===n.indexOf(s)&&n.push(s);for(var o=n.length,a=0;a<o;a++){for(var s=n[a],c=[],u=0;u<r;u++){var p=t[u];p.category===s&&c.push(p)}e[a]=c}return e}(this._waitingQueue_),n=e.length;try{for(var r=0;r<n;r++){for(var i=(t=e[r])[0]._servAddr,o=t.length,a=0;a<o;a++)t[a].w_send_mode="miniapp.request",t[a]._servAddr=void 0,t[a]._hash=void 0,t[a]=c.objToJsonString(t[a]);var s=encodeURIComponent(t.join("\n"));this.sendRequest(i,s)}}catch(t){this.print("send logData failed: ",t)}}this._waitingQueue_=[]},_cleanData:function(t){for(var e,n=1;n<=10;n++)t.hasOwnProperty(e="bl"+n)&&(t["w_"+e]=t[e],t[e]=void 0)},print:function(t,e){!0===this.debug&&c.print(t,e)}},t.exports=r},function(t,e,n){function c(t,e,n){return e=t[e]||t.startTime,t=t[n],e&&t?t-e:null}function r(){this._init()}var i=n(0),u={wl_load:["startTime","loadEnd"],wl_ready:["startTime","readyEnd"],wl_avl:["bizAvailableStart","bizAvailableEnd"],wl_l4h:["appLaunchStart","appLaunchEnd"],wl_est:["evaluateScriptStart","evaluateScriptEnd"],wl_f9r:["firstRenderStart","firstRenderEnd"],wl_rn:["routeStart","routeEnd"]},p={page:{wl_s3ttm:"startTime",wl_rntm:"routeStart",wl_avltm:"bizAvailableStart",wl_f9rtm:"firstRenderStart"},launch:{wl_s3ttm:"startTime",wl_al4htm:"appLaunchStart",wl_avltm:"bizAvailableStart",wl_esttm:"evaluateScriptStart",wl_f9rtm:"firstRenderStart"}},o={start:"Start",end:"End"};r.prototype={constructor:r,_init:function(){this.launchStage=!1,this.recording=!1,this.uploaded=!1,this.timing={}},mark:function(t,e,n){this.recording&&("startTime"===t||o[e]?this.timing[t+(e=o[e]||"")]=n||Date.now():i.print("perf mark type: "+e+" is unsupported by sdk"))},onAppStartup:function(){this.launchStage=!0,this.startRecording(),this.mark("startTime")},onPageInit:function(){this.launchStage||(this.startRecording(),this.mark("startTime"))},onPageLoad:function(){this.launchStage?this.mark("load","end"):this.recording?this.timing.wl_l2dtm=Date.now():(this.startRecording(),this.mark("startTime"))},onPageReady:function(){this.mark("ready","end")},toLogData:function(){var t=function(t,e){var n,r={indAmount:0};for(n in u){var i=c(t,u[n][0],u[n][1]);null!==i&&0<=i&&(r[n]=i,r.indAmount+=1)}var o,a=p[e?"launch":"page"];for(o in a){var s=t[a[o]];s&&(r[o]=s)}return t.wl_l2dtm&&(r.wl_l2dtm=t.wl_l2dtm),r}(this.timing,this.launchStage),e=function(t){for(var e={indAmount:0},n=1;n<=5;n++){var r=c(t,"wl_avgv"+n+"Start","wl_avgv"+n+"End"),r=(null!==r&&0<=r&&(e["wl_avgv"+n]=r,e.indAmount+=1),t["wl_avgv"+n+"Start"]);r&&(e["wl_v"+n+"tm"]=r)}return e}(this.timing);return i.extend({},t,e,{indAmount:t.indAmount+e.indAmount})},startRecording:function(){this.uploaded=!1,this.recording=!0},reset:function(){this._init()},markUploaded:function(){this.uploaded=!0},resetAndMarkUpload:function(){this._init(),this.uploaded=!0}},t.exports=r},function(t,e,n){t.exports=n(7)},function(t,e,n){function r(t){s.call(this,t),this.disableApi||a(this)}var i=n(0),o=n(1),a=n(8),s=n(2),c=(i.inherit(r,s),i.extend(r.prototype,{sendRequest:function(t,e,n){if("undefined"!=typeof my&&i.isFunc(my.request)){var r=this;try{my.request({url:t,method:"POST",data:e,timeout:1e4,dataType:"application/json",success:function(t){r.print("\u4e0a\u62a5\u6210\u529f:",t),t&&t.data&&void 0!==t.data&&(r.processingRCfg?r.print("sendRequest: already one process handling dycfg, let's break"):(r.processingRCfg=!0,r.print("will update dycfg: ",t.data),t=i.processRCfg(t.data,r.VERSION),r.setRCfg(t),r.processingRCfg=!1))},fail:function(t){r.processingRCfg=!1,r.print("alipay my.request fail: ",t)}})}catch(t){r.print("alipay sendRequest fail: ",t)}}},getCurrentPage:function(){if(i.isFunc(getCurrentPages))try{var t=getCurrentPages()||[],e=t[t.length-1];return e&&e.route||"unknow"}catch(t){this.print("getCurrentPage error:",t)}},setCommonInfo:function(){var e=this;try{var t,n=my.getSystemInfoSync();this.commonInfo=i.extend({},{model:n.model,brand:n.brand,dsp_dpi:n.pixelRatio,l_win_w:n.windowWidth,l_win_h:n.windowHeight,dsp_w:n.screenWidth,dsp_h:n.screenHeight,lang:n.language,bver:n.version,browser:n.app,rom:n.system,fr:n.platform,crver:my.SDKVersion}),my.getNetworkType({success:function(t){i.extend(e.commonInfo,{net:t.networkType})}}),my.canIUse("my.getAppIdSync")&&(t=my.getAppIdSync(),i.extend(this.commonInfo,{k_mappid:t.appId}))}catch(n){this.print("setCommonInfo failed: ",n)}},getWid:function(){if(i.isFunc(my.getStorageSync)){var e=this;try{var t=my.getStorageSync({key:o.sdk.WID_KEY});if(void 0!==t&&t.data)return t.data;var n=i.uuid();return my.setStorage({key:o.sdk.WID_KEY,data:n,fail:function(t){e.print("setStorage failed: ",t)}}),n}catch(t){e.print("getWid failed: ",t)}}return i.uuid()},jconfig:function(){var e=this,t=this.getRCfg();if(null===t)try{i.fetchJconfig(my.request,{gw:o.px.confAddr[this.cluster],app:this.bid,sdkver:this.VERSION},function(t){e.print("jconfig come back: ",t),t&&t.data&&void 0!==t.data&&(e.processingRCfg?e.print("jconfig: already one process handling dycfg, let's break"):(e.processingRCfg=!0,e.print("jconfig will update dycfg: ",t.data),t=i.processRCfg(t.data,e.VERSION),e.setRCfg(t),e.processingRCfg=!1))})}catch(t){e.print("jconfig failed: ",t)}else e._rcfg_=t,e.print("jconfig use cachedCfg")},getRCfg:function(){var t=null;try{var e=my.getStorageSync({key:o.sdk.RCFG_KEY});void 0!==e&&e.data&&(t=e.data)}catch(t){this.print("getRCfg from storage failed: ",t)}return this.print("finally getRCfg: ",t),t},setRCfg:function(t){var e=this;try{e._rcfg_=i.isObject(t)?t:{},e.print("setRCfg: ",this._rcfg_),my.setStorage({key:o.sdk.RCFG_KEY,data:t,fail:function(t){e.print("setRCfg to storage failed: ",t)}})}catch(t){e.print("setRCfg failed: ",t)}}}),null);r.getInstance=function(t){return c=c||new r(t)},t.exports=r},function(t,e,n){var p=n(0),r=!1;t.exports=function(c){var u,t;!r&&"undefined"!=typeof my&&p.isFunc(my.request)&&(r=!0,u=my.request,(t=Object.getOwnPropertyDescriptor(my,"request"))&&t.writable&&(my.request=function(n){var t,r=Date.now(),i=n;if(n&&n.url){var e=n.url.split("?"),o=e[0];if(!(t=e[0])||-1!==t.indexOf("//arms-retcode")||-1!==t.indexOf("//retcode.taobao.com")||-1!==t.indexOf("//retcode-sg-lazada.arms.aliyuncs.com")||-1!==t.indexOf("//wpk-gateway")||-1!==t.indexOf("//px.ucweb.com")||-1!==t.indexOf("//px.effirst.com")||-1!==t.indexOf("//px-intl.ucweb.com"))return c.print("url was ignore: ",o),u.call(my,i);var a=e[1],s=p.isObject(i.headers)?i.headers:{},i=p.extend({},i,{success:function(t){p.isFunc(n.success)&&n.success(t);var e=Date.now()-r;c.reportApi({url:o,method:i.method,queryString:a,headers:s,body:n.data||"",response:t.data||"",respHeaders:t.headers||{},status:t.status,spent:e})},fail:function(t){p.isFunc(n.fail)&&n.fail(t);var e=Date.now()-r;c.reportApi({url:o,method:i.method,queryString:a,headers:s,body:n.data||"",response:t.data||"",respHeaders:t.headers||{},status:t.status,spent:e})}})}return u.call(my,i)}))}}],l={},f.m=p,f.c=l,f.d=function(t,e,n){f.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},f.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},f.t=function(e,t){if(1&t&&(e=f(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(f.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)f.d(n,r,function(t){return e[t]}.bind(null,r));return n},f.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return f.d(e,"a",e),e},f.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},f.p="",f(f.s=6));var d,S,h=(t=t.exports)&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;function g(){var r,o,a,t,s,c,u,p;d=A.AFAppX.bridge.isIDE?{wrapApp:function(t){return t},wrapPage:function(t){return t},report:function(t){},reportJSError:function(t){},reportApi:function(t){}}:h.getInstance({bid:"taojimu-isv-plugin",uid:"",rel:"runtime-0.0.35"}),A.AFAppX.bridge.isIDE||(r=d.report,o=d.getCurrentPage,t=A.AFAppX.requirePlugin("taojimu"),a=t.getEnv,t=t.tb,s=t.getExtConfig,c=t.getSystemInfo,u=d.commonInfo={},d.report=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];var n=Promise.resolve();(n=Object.keys(u).length?n:c().then(function(t){Object.assign(u,{model:t.model,brand:t.brand,dsp_dpi:t.pixelRatio,l_win_w:t.windowWidth,l_win_h:t.windowHeight,dsp_w:t.screenWidth,dsp_h:t.screenHeight,lang:t.language,bver:t.version,browser:t.app,rom:t.system,fr:t.platform,crver:my.SDKVersion}),my.getNetworkType({success:function(t){Object.assign(u,{net:t.networkType})}})})).then(function(){return t=((t=i[0])||{}).category,n=Promise.resolve(),0<=t&&t<=99&&(e=(t=a()).debug,r=t.pageId,p||!1!==e||"function"!=typeof o||(n=(n=r?n:n.then(function(){return s()}).then(function(t){t=t.data;r=t.id})).then(function(){p=1,d.getCurrentPage=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(o.apply(d,e)||"unknow")+"::"+r}}).catch(function(){}))),n;var t,e,r,n}).then(function(){setTimeout(function(){r.apply(d,i)},0)})})}function k(){return d||g(),d}function m(){var o={};function s(t){return t&&R(t.then)}function a(t,e){return void 0===e?t:e}function e(o,a){return R(a)?R(o)?function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=a.apply(this,n);s(i)?i.then(function(){return o.apply(t,n)}).catch(function(t){k().reportJSError(new Error(t))}):o.apply(this,n)}:a:b(a)?function(){for(var t,e=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];s(t=R(a.before)?a.before.apply(this,r):t)?R(o)&&(t=t.then(function(){return o.apply(e,r)}).catch(function(t){k().reportJSError(new Error(t))})):R(o)&&(t=o.apply(this,r)),R(a.after)&&(s(t)?t.then(function(){return a.after.apply(e,r)}).catch(function(t){k().reportJSError(new Error(t))}):a.after.apply(this,r))}:o}function n(t,e){return R(e)?e:t}function c(r){var i=Object.prototype.hasOwnProperty;if(r){for(var t=arguments.length,e=new Array(1<t?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];e.forEach(function(t){if(t)for(var e in t){var n;i.call(t,e)&&(n=o[e]||a,r[e]=n(r[e],t[e],e))}})}return r}["onLaunch","onLoad","onShow","onReady"].forEach(function(t){o[t]=e}),["onShareAppMessage"].forEach(function(t){o[t]=n});function t(t){F("register new App ",u,t);var n,e=new Promise(function(t){n={resolve:function(){t.apply(void 0,arguments)}}}),r=A.AFAppX.requirePlugin("taojimu"),g=r.log,i=r.getEnv,m=r.setEnv,y=r.tb,v=r.getAlpConfig,w=r.getPageConf,b=(r=r.tb).getSystemInfo,_=r.canIUse,S=A.AFAppX.bridge.showToast,P=A.AFAppX.bridge.hideToast;return u(k().wrapApp(c(t,{onLaunch:{before:function(t){var e,n,r,i,o,a=this,s=t.query,s=void 0===s?{}:s,t=t.path;try{var c=y.getOriginalRouteUrl().url||"";h=c,(o=C.get(h=h||""))||(i=h.replace(x,""),h==i&&E.test(i)&&(i=""),h.replace(i,"").replace(O,I),C.put(h,o={pathname:i,params:T})),e=(r={pathname:o.pathname,params:Object.assign({},o.params)}).params,n=r.pathname}catch(t){e={},n=""}try{var u=my.callSync("originalRouteUrl",{}),p=!u.url&&!(4!=u.error&&!~(""+u.errorMessage).indexOf("\u65e0\u6743\u9650"))}catch(t){p=!1}var l=my.redirectTo,f=my.navigateTo,d=my.request,h=new j({show:S,hide:P});return my.showToast=h.showToast,my.hideToast=h.hideToast,m(Object.assign({isISVMiniapp:p,urlParams:Object.assign(e,s),path:t,pageUrl:c,pathname:n,redirectTo:function(t){l(t)},navigateTo:function(t){f(t)},request:function(t){d(t)}},1==(null==s?void 0:s.isTaojimu)||"debug"!==e.nbsource?{debug:!1}:null),!0),my.request=function(t){return y.request(t)},v().then(function(t){m({alpConfig:t},!0)}).catch(function(){}),Promise.all([w(),b()]).then(function(t){var e=t[0],n=t[1],t=(null!=(t=a.globalData)&&t.pageConf&&(a.globalData.pageConf=Object.assign({},e)),e.id),r=e.componentTree;return m({appEnv:n,cid:(null==r||null==(r=r[0])?void 0:r.name)||"unknown_cid",pageId:t,pageConf:e},!0),my.getSystemInfoSync=function(){return Object.assign({},n)},my.getExtConfigSync=function(){return Object.assign({},e)},my.getSystemInfo=function(t){var e;t&&(e=Object.assign({},n),R(t.success)&&t.success(e),R(t.complete)&&t.complete(e))},my.request=function(t){return y.request(t)},my.redirectTo=function(t){t&&"string"==typeof t.url&&0===t.url.indexOf("plugin://taojimu/error")&&g.updateSpmUrl("plugin","derror"),l(t)},my.navigateTo=function(t){t&&"string"==typeof t.url&&0===t.url.indexOf("plugin://taojimu/error")&&g.updateSpmUrl("plugin","derror"),f(t)},_({autoRedirect:1}).then(function(){})}).catch(function(t){return my.redirectTo({url:"plugin://taojimu/error?reason="+encodeURIComponent(t||"")}),Promise.reject()})},after:function(t){var e=i().urlParams;n.resolve(),e.share_crt_v&&g.sendLog({atype:"share_pv"},{gmkey:"EXP"})}},onShow:function(){return e.then(function(){})}})))}function r(t){F("register new Page ",i,t);var e,n=A.AFAppX.requirePlugin("taojimu"),u=n.log,p=n.getEnv,l=n.setEnv,f=n.getAlpConfig,d=n.getPageConf,h=n.task,g=(n=n.tb).getSystemInfo,m=n.canIUse,y=A.AFAppX.bridge.showToast,v=A.AFAppX.bridge.hideToast,r=new Promise(function(t){e={resolve:function(){t.apply(void 0,arguments)}}});return i(k().wrapPage(c(t,{onLoad:{before:function(t){var e=this,n=p(),r=n.urlParams,n=n.path,i=r.shareQuery;if(i&&this.route===n)try{i=JSON.parse(i),Object.assign(t,i)}catch(t){}var r=new j({show:y,hide:v}),o=r.showToast,a=r.hideToast,s=R(this.onShow)?this.onShow.bind(this):S,c=R(this.onHide)?this.onHide.bind(this):S,u=R(this.onUnload)?this.onUnload.bind(this):S,n={setToast:function(t){var t=void 0===t?{}:t,e=t.show,t=t.hide;R(e)&&(my.showToast=e),R(t)&&(my.hideToast=t)},restoreToast:function(){my.showToast=o,my.hideToast=a}};return b(i)&&Object.assign(n,{shareQuery:i}),Object.defineProperties(n,{onShow:{get:function(){return s},set:function(t){R(t)&&(e.onShow=t)}},onHide:{get:function(){return c},set:function(t){R(t)&&(e.onHide=t)}},onUnload:{get:function(){return u},set:function(t){R(t)&&(e.onUnload=t)}}}),l({"\x1f$page":n},!0),f().then(function(t){l({alpConfig:t},!0)}).catch(function(){}),Promise.all([d(),g()]).then(function(t){var e=t[0],t=t[1],n=getApp(),r=(null!=(r=n.globalData)&&r.pageConf&&(n.globalData.pageConf=e),e.id),n=e.componentTree;return l({appEnv:t,cid:(null==n||null==(t=n[0])?void 0:t.name)||"unknown_cid",pageId:r,pageConf:e},!0),null!=i&&i.ali_taojimu_isv_plugin_task_uuid&&setTimeout(function(){h.shareForHelp({action:"shareForHelp",from:"runtime"}).then(function(){}).catch(function(){})},0),m({autoRedirect:1}).then(function(){})}).catch(function(t){return my.redirectTo({url:"plugin://taojimu/error?reason="+encodeURIComponent(t||"")}),Promise.reject()})},after:function(){var t=this;Object.assign(w,{rendered:1}),1!=w.pageReady&&new Promise(function(t){var e,n=A.AFAppX.requirePlugin("taojimu").event;n.on("plugin.onReady",function(){e&&clearTimeout(e),t()}),e=setTimeout(function(){n.detach("plugin.onReady"),t()},1e3)}).then(function(){Object.assign(w,{pageReady:1}),t.setData({"ali_taojimu_isv_runtime.pageReady":1})}),this.setData({ali_taojimu_isv_runtime:Object.assign({},w)},function(){R(u.sendAdCharge)&&!w.isSentAdCharge&&(u.sendAdCharge(),w.isSentAdCharge=1)}),e.resolve()}},onShow:function(){return u.sendPV(),r.then(function(){})},onReady:function(){return r.then(function(){})},onShareAppMessage:function(){var e=A.AFAppX.requirePlugin("taojimu").event,t=p(),n=t.pageConf,r=t.path,i=t.pathname,o=t.urlParams,t=t.shareQuery,a=n.frame,a=(a=void 0===a?{}:a).compExt,s=n.pageAttribute,s=(s=void 0===s?{}:s).shopInfo,s=void 0===s?{}:s,n=n.componentTree,n=void 0===n?[]:n,c={title:(null==a||null==(c=a.share)?void 0:c.share_title)||(null==s?void 0:s.shopName)||"\u53d1\u73b0\u4e00\u4e2a\u597d\u73a9\u7684",desc:(null==a||null==(c=a.share)?void 0:c.share_desc)||"\u8fd9\u91cc\u6709\u4e00\u4e2a\u5f88\u68d2\u7684\u6d3b\u52a8\uff0c\u5feb\u6765\u770b\u770b\u5427",imageUrl:(null==a||null==(c=a.share)||null==(a=c.share_img)?void 0:a.src)||(null==s?void 0:s.shopLogo),path:_(r,t),success:function(t){t.shareResult&&e.fire("page.onShare",t)}};return o&&(s=(null==(a=n[0])?void 0:a.spmc)||"0",Object.assign(c,{url:_(i,Object.assign({_ariver_appid:o._ariver_appid,query:o.query,tjm_src_bp:o.tjm_src_bp,spm:[].concat(u.getPageSPM()).concat([s,"dshare"]).join(".")},t?{shareQuery:JSON.stringify(t)}:null))})),c}})))}var u=A.App,i=A.Page,w={};"undefined"==typeof self?(App=t,Page=r):(Object.defineProperty(A,"App",{get:function(){return t},set:function(t){u=t}}),Object.defineProperty(A,"Page",{get:function(){return r},set:function(t){i=t}}))}h.prototype.setCommonInfo=function(){},F("run taojimu inject main func"),m()}(); /**! __TAOJIMU_END__ */
if(!self.__appxInited) {
self.__appxInited = 1;
require('@alipay/appx-compiler/lib/sjsEnvInit');

require('./config$');
require('./importScripts$');

var AFAppX = self.AFAppX;
self.getCurrentPages = AFAppX.getCurrentPages;
self.getApp = AFAppX.getApp;
self.Page = AFAppX.Page;
self.App = AFAppX.App;
self.my = AFAppX.bridge || AFAppX.abridge;
self.abridge = self.my;
self.Component = AFAppX.WorkerComponent || function(){};
self.$global = AFAppX.$global;
self.requirePlugin = AFAppX.requirePlugin;


if(AFAppX.registerApp) {
  AFAppX.registerApp({
    appJSON: appXAppJson,
  });
}

if(AFAppX.compilerConfig){ AFAppX.compilerConfig.component2 = true; }

function success() {
require('../../app');
require('../../pages/index/index?hash=c38b953af6bdab8fe399141b33dd1ad1ceb7ea7f');
}
self.bootstrapApp ? self.bootstrapApp({ success }) : success();
}